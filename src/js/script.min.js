"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
document.addEventListener('DOMContentLoaded', function () {
  var setLangBtn = document.querySelector('.switch-language__btn');
  var setLangDropdown = document.querySelector('.switch-language__dropdown');
  var setLangDropdownEls = document.querySelectorAll('.switch-language__dropdown-element');
  var menuBackdrop = document.querySelector('.backdrop');
  var menuDropdownLink = document.querySelector('.menu-item__dropdown');
  var header = document.querySelector('.header');
  setLangBtn.addEventListener('click', function (e) {
    e.preventDefault();
    setLangDropdown.classList.toggle('switch-language__dropdown--active');
    if (!header.classList.contains('header__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
    });
  });
  setLangDropdownEls.forEach(function (el) {
    el.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
      var currentLang = setLangBtn.querySelector('p').innerHTML;
      setLangBtn.querySelector('p').innerHTML = el.innerHTML;
      el.innerHTML = currentLang;
    });
  });
  menuDropdownLink.addEventListener('click', function (e) {
    e.preventDefault();
    if (!setLangDropdown.classList.contains('switch-language__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    header.classList.toggle('header__dropdown--active');
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      header.classList.remove('header__dropdown--active');
    });
  });

  //mobile menu
  var burgerBtn = header.querySelector('.burger-btn');
  burgerBtn.addEventListener('click', function () {
    header.classList.toggle('mobile-menu--active');
    if (header.classList.contains('mobile-menu--active')) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'visible';
    }
  });
  var mobileDropdownBtns = header.querySelectorAll('.mobile-menu__dropdown-btn');
  mobileDropdownBtns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.classList.toggle('mobile-dropdown--active');
    });
  });
  var formTopicInput = document.querySelectorAll('.form__topic');
  var formTopicDropdown = document.querySelector('.topic__dropdown');
  if (formTopicInput) {
    formTopicInput.forEach(function (topicInput) {
      topicInput.addEventListener('click', function (e) {
        if (e.target.classList.contains('topic__dropdown-item')) {
          topicInput.querySelector('.input-placeholder').innerHTML = e.target.innerHTML;
          topicInput.querySelector('#form-topic').setAttribute('value', e.target.innerHTML);
        }
        console.log(e.target);
        topicInput.classList.toggle('topic__dropdown--active');
      });
    });
  }

  // templates accordion
  // const accordionHeaders = document.querySelectorAll('.templates__list-element-header');
  // if (accordionHeaders){
  //     accordionHeaders.forEach((header) => {
  //         header.addEventListener('click', () => {
  //             header.classList.toggle('templates__list-element--active');
  //         });
  //     });
  // }
  var ItcAccordion = /*#__PURE__*/function () {
    function ItcAccordion(target, config) {
      _classCallCheck(this, ItcAccordion);
      this._el = typeof target === 'string' ? document.querySelector(target) : target;
      var defaultConfig = {
        alwaysOpen: true,
        duration: 350
      };
      this._config = Object.assign(defaultConfig, config);
      this.addEventListener();
    }
    _createClass(ItcAccordion, [{
      key: "addEventListener",
      value: function addEventListener() {
        var _this = this;
        this._el.addEventListener('click', function (e) {
          var elHeader = e.target.closest('.accordion__header');
          if (!elHeader) {
            return;
          }
          if (!_this._config.alwaysOpen) {
            var elOpenItem = _this._el.querySelector('.accordion__item_show');
            if (elOpenItem) {
              elOpenItem !== elHeader.parentElement ? _this.toggle(elOpenItem) : null;
            }
          }
          _this.toggle(elHeader.parentElement);
        });
      }
    }, {
      key: "show",
      value: function show(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['display'] = 'block';
        var height = elBody.offsetHeight;
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.add('collapsing');
        el.classList.add('accordion__item_slidedown');
        elBody.offsetHeight;
        elBody.style['height'] = "".concat(height, "px");
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          el.classList.remove('accordion__item_slidedown');
          elBody.classList.add('collapse');
          el.classList.add('accordion__item_show');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "hide",
      value: function hide(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || !el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['height'] = "".concat(elBody.offsetHeight, "px");
        elBody.offsetHeight;
        elBody.style['display'] = 'block';
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.remove('collapse');
        el.classList.remove('accordion__item_show');
        elBody.classList.add('collapsing');
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          elBody.classList.add('collapse');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "toggle",
      value: function toggle(el) {
        el.classList.contains('accordion__item_show') ? this.hide(el) : this.show(el);
      }
    }]);
    return ItcAccordion;
  }();
  if (document.querySelector('#accordion')) {
    new ItcAccordion(document.querySelector('.accordion'), {
      alwaysOpen: true
    });
  }

  //content slider
  var swiperContainer = document.querySelector('.slider-container'); //swiper-slide-active
  if (swiperContainer) {
    var sliderSlide = swiperContainer.querySelectorAll('.swiper-slide');
    var imageDesc = swiperContainer.querySelector('.p');
    imageDesc.innerHTML = sliderSlide[0].getAttribute('alt');
    var contentSwiper = new Swiper(".contentSlider", {
      pagination: {
        el: ".swiper-pagination",
        clickable: true
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev"
      }
    });
    contentSwiper.on('slideChange', function () {
      imageDesc.innerHTML = sliderSlide[contentSwiper.activeIndex].getAttribute('alt');
    });
    var sliderPrev = document.querySelector('.sliderPrev');
    var sliderNext = document.querySelector('.sliderNext');
    sliderPrev.addEventListener('click', function () {
      contentSwiper.slidePrev();
    });
    sliderNext.addEventListener('click', function () {
      contentSwiper.slideNext();
    });
  }
  ;

  // numbers counter ++
  var numbersTitle = document.querySelectorAll('.numbers__title');
  var observerOptions = {
    rootMargin: '0px 0px -10% 0px',
    threshold: 0
  };
  if (numbersTitle.length != 0) {
    numbersTitle.forEach(function (title) {
      title.setAttribute('data-end-counter', title.innerHTML);
      title.innerHTML = 0;
    });
    var numbersCounterCallback = function numbersCounterCallback(entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          numbersTitle.forEach(function (title) {
            numberCounter(title);
          });
        }
      });
    };
    var numberObserver = new IntersectionObserver(numbersCounterCallback, observerOptions);
    numberObserver.observe(numbersTitle[0]);
  }
  function numberCounter(title) {
    var number = title.getAttribute('data-end-counter').replace(/[^0-9]/g, "");
    var symbol = title.getAttribute('data-end-counter').replace(/[0-9]/g, "");
    var n = 0;
    var step = number < 100 ? 1 : 10;
    var t = step === 1 ? 50 : 10;
    var interval = setInterval(function () {
      n += step;
      title.innerHTML = n + symbol;
      if (n == number) {
        clearInterval(interval);
      }
    }, t);
    title.removeAttribute('data-end-counter');
  }

  //partners
  var partnersList = document.querySelector('.partners__list');
  if (partnersList) {
    var loadPartners = function loadPartners(partnersList) {
      var allPartners = partnersList.querySelectorAll('.partners__list-element');
      allPartners.forEach(function (el, idx) {
        setTimeout(function () {
          el.classList.add('load');
        }, idx * (allPartners.length + 80) + 250);
      });
    };
    var partnersListCallback = function partnersListCallback(entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          loadPartners(partnersList);
        }
      });
    };
    var partnersListObserver = new IntersectionObserver(partnersListCallback, observerOptions);
    partnersListObserver.observe(partnersList);
    ;
  }
  var modal = document.querySelector('.popUp-modal');
  var popUpBack = document.querySelector('.popUp-background');
  var openModalBtn = document.querySelector('.quick-consult');
  var closeModalBtn = modal.querySelector('.close-modal');
  openModalBtn.addEventListener('click', function (e) {
    e.preventDefault();
    modal.classList.add('modal--show');
    popUpBack.classList.remove('modal--close');
    document.body.style.overflow = 'hidden';
    popUpBack.classList.add('modal--open');
    popUpBack.addEventListener('click', function () {
      modal.classList.remove('modal--show');
      popUpBack.classList.remove('modal--open');
      popUpBack.classList.add('modal--close');
      document.body.style.overflow = 'visible';
    });
  });
  closeModalBtn.addEventListener('click', function () {
    modal.classList.remove('modal--show');
    popUpBack.classList.remove('modal--open');
    popUpBack.classList.add('modal--close');
    document.body.style.overflow = 'visible';
  });
  var reviewsList = document.querySelectorAll('.review__info');
  if (reviewsList.length > 0) {
    reviewsList.forEach(function (review) {
      var btn = review.querySelector('.review__view-full-btn');
      var reviewHeight = review.querySelector('.review__text').scrollHeight;
      var reviewText = review.querySelector('.review__text');
      if (reviewHeight <= 140) {
        btn.style.opacity = 0;
      }
      btn.addEventListener('click', function (e) {
        var reviewHeight = review.querySelector('.review__text').scrollHeight;
        e.preventDefault();
        if (reviewText.classList.contains('open')) {
          reviewText.classList.remove('open');
          reviewText.style.height = 140 + 'px';
        } else {
          reviewText.classList.add('open');
          reviewText.style.height = "".concat(reviewHeight, "px");
        }
      });
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRMYW5nQnRuIiwicXVlcnlTZWxlY3RvciIsInNldExhbmdEcm9wZG93biIsInNldExhbmdEcm9wZG93bkVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtZW51QmFja2Ryb3AiLCJtZW51RHJvcGRvd25MaW5rIiwiaGVhZGVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJmb3JFYWNoIiwiZWwiLCJjdXJyZW50TGFuZyIsImlubmVySFRNTCIsImJ1cmdlckJ0biIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwibW9iaWxlRHJvcGRvd25CdG5zIiwiYnRuIiwiZm9ybVRvcGljSW5wdXQiLCJmb3JtVG9waWNEcm9wZG93biIsInRvcGljSW5wdXQiLCJ0YXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJjb25zb2xlIiwibG9nIiwiSXRjQWNjb3JkaW9uIiwiY29uZmlnIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2VsIiwiZGVmYXVsdENvbmZpZyIsImFsd2F5c09wZW4iLCJkdXJhdGlvbiIsIl9jb25maWciLCJPYmplY3QiLCJhc3NpZ24iLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsIl90aGlzIiwiZWxIZWFkZXIiLCJjbG9zZXN0IiwiZWxPcGVuSXRlbSIsInBhcmVudEVsZW1lbnQiLCJzaG93IiwiZWxCb2R5IiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiY29uY2F0IiwiYWRkIiwid2luZG93Iiwic2V0VGltZW91dCIsImhpZGUiLCJzd2lwZXJDb250YWluZXIiLCJzbGlkZXJTbGlkZSIsImltYWdlRGVzYyIsImdldEF0dHJpYnV0ZSIsImNvbnRlbnRTd2lwZXIiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwiY2xpY2thYmxlIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIm9uIiwiYWN0aXZlSW5kZXgiLCJzbGlkZXJQcmV2Iiwic2xpZGVyTmV4dCIsInNsaWRlUHJldiIsInNsaWRlTmV4dCIsIm51bWJlcnNUaXRsZSIsIm9ic2VydmVyT3B0aW9ucyIsInJvb3RNYXJnaW4iLCJ0aHJlc2hvbGQiLCJsZW5ndGgiLCJ0aXRsZSIsIm51bWJlcnNDb3VudGVyQ2FsbGJhY2siLCJlbnRyaWVzIiwib2JzZXJ2ZXIiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidW5vYnNlcnZlIiwibnVtYmVyQ291bnRlciIsIm51bWJlck9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlIiwibnVtYmVyIiwicmVwbGFjZSIsInN5bWJvbCIsIm4iLCJzdGVwIiwidCIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQXR0cmlidXRlIiwicGFydG5lcnNMaXN0IiwibG9hZFBhcnRuZXJzIiwiYWxsUGFydG5lcnMiLCJpZHgiLCJwYXJ0bmVyc0xpc3RDYWxsYmFjayIsInBhcnRuZXJzTGlzdE9ic2VydmVyIiwibW9kYWwiLCJwb3BVcEJhY2siLCJvcGVuTW9kYWxCdG4iLCJjbG9zZU1vZGFsQnRuIiwicmV2aWV3c0xpc3QiLCJyZXZpZXciLCJyZXZpZXdIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJyZXZpZXdUZXh0Iiwib3BhY2l0eSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQUEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0VBQ2xELElBQU1DLFVBQVUsR0FBR0YsUUFBUSxDQUFDRyxhQUFhLENBQUMsdUJBQXVCLENBQUM7RUFDbEUsSUFBTUMsZUFBZSxHQUFHSixRQUFRLENBQUNHLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQztFQUM1RSxJQUFNRSxrQkFBa0IsR0FBR0wsUUFBUSxDQUFDTSxnQkFBZ0IsQ0FBQyxvQ0FBb0MsQ0FBQztFQUUxRixJQUFNQyxZQUFZLEdBQUdQLFFBQVEsQ0FBQ0csYUFBYSxDQUFDLFdBQVcsQ0FB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Q3JFLElBQUlDLFVBQVUsR0FBR0gsTUFBTSxDQUFDL0csYUFBYSxDQUFDLGVBQWUsQ0FBQztNQUN0RCxJQUFJZ0gsWUFBWSxJQUFJLEdBQUcsRUFBQztRQUN0QjFGLEdBQUcsQ0FBQ0gsS0FBSyxDQUFDZ0csT0FBTyxHQUFHLENBQUM7TUFDdkI7TUFFQTdGLEdBQUcsQ0FBQ3hCLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxVQUFDUyxDQUFDLEVBQUs7UUFDbkMsSUFBSXlHLFlBQVksR0FBR0QsTUFBTSxDQUFDL0csYUFBYSxDQUFDLGVBQWUsQ0FBQyxDQUFDaUgsWUFBWTtRQUNyRTFHLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLENBQUM7UUFDbEIsSUFBRzBHLFVBQVUsQ0FBQ3pHLFNBQVMsQ0FBQ0UsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFDO1VBQ3ZDdUcsVUFBVSxDQUFDekcsU0FBUyxDQUFDRyxNQUFNLENBQUMsTUFBTSxDQUFDO1VBQ25Dc0csVUFBVSxDQUFDL0YsS0FBSyxDQUFDK0IsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJO1FBQ3RDLENBQUMsTUFBSTtVQUNIZ0UsVUFBVSxDQUFDekcsU0FBUyxDQUFDNEMsR0FBRyxDQUFDLE1BQU0sQ0FBQztVQUNoQzZELFVBQVUsQ0FBQy9GLEtBQUssQ0FBQytCLE1BQU0sTUFBQUUsTUFBQSxDQUFNNEQsWUFBWSxPQUFJO1FBQy9DO01BRUYsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0o7QUFDRixDQUFDLENBQUMiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGNvbnN0IHNldExhbmdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoLWxhbmd1YWdlX19idG4nKTtcbiAgY29uc3Qgc2V0TGFuZ0Ryb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24nKTtcbiAgY29uc3Qgc2V0TGFuZ0Ryb3Bkb3duRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tZWxlbWVudCcpO1xuXG4gIGNvbnN0IG1lbnVCYWNrZHJvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYWNrZHJvcCcpO1xuXG4gIGNvbnN0IG1lbnVEcm9wZG93bkxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtX19kcm9wZG93bicpO1xuICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgc2V0TGFuZ0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldExhbmdEcm9wZG93bi5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICBpZiAoIWhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2hlYWRlcl9fZHJvcGRvd24tLWFjdGl2ZScpKSB7XG4gICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnRvZ2dsZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgIH1cbiAgICBtZW51QmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgICAgc2V0TGFuZ0Ryb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgIH0pXG4gIH0pO1xuXG4gIHNldExhbmdEcm9wZG93bkVscy5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICAgIHNldExhbmdEcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcblxuICAgICAgbGV0IGN1cnJlbnRMYW5nID0gc2V0TGFuZ0J0bi5xdWVyeVNlbGVjdG9yKCdwJykuaW5uZXJIVE1MO1xuICAgICAgXG4gICAgICBzZXRMYW5nQnRuLnF1ZXJ5U2VsZWN0b3IoJ3AnKS5pbm5lckhUTUwgPSBlbC5pbm5lckhUTUw7XG4gICAgICBlbC5pbm5lckhUTUwgPSBjdXJyZW50TGFuZztcbiAgICB9KTtcbiAgfSk7XG5cbiAgbWVudURyb3Bkb3duTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghc2V0TGFuZ0Ryb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucygnc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bi0tYWN0aXZlJykpIHtcbiAgICAgIG1lbnVCYWNrZHJvcC5jbGFzc0xpc3QudG9nZ2xlKCdiYWNrZHJvcC0tYWN0aXZlJyk7XG4gICAgfVxuICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICBtZW51QmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9fZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgIH0pXG4gIH0pO1xuXG4gIC8vbW9iaWxlIG1lbnVcbiAgY29uc3QgYnVyZ2VyQnRuID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItYnRuJyk7XG4gIGJ1cmdlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnbW9iaWxlLW1lbnUtLWFjdGl2ZScpO1xuICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2JpbGUtbWVudS0tYWN0aXZlJykpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcbiAgICB9XG4gIH0pO1xuICBjb25zdCBtb2JpbGVEcm9wZG93bkJ0bnMgPSBoZWFkZXIucXVlcnlTZWxlY3RvckFsbCgnLm1vYmlsZS1tZW51X19kcm9wZG93bi1idG4nKTtcbiAgbW9iaWxlRHJvcGRvd25CdG5zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUtZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgIH0pO1xuICB9KVxuXG4gIGNvbnN0IGZvcm1Ub3BpY0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX3RvcGljJyk7XG4gIGNvbnN0IGZvcm1Ub3BpY0Ryb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcGljX19kcm9wZG93bicpO1xuICBpZiAoZm9ybVRvcGljSW5wdXQpIHtcbiAgICBmb3JtVG9waWNJbnB1dC5mb3JFYWNoKCh0b3BpY0lucHV0KSA9PiB7XG4gICAgICB0b3BpY0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndG9waWNfX2Ryb3Bkb3duLWl0ZW0nKSkge1xuICAgICAgICAgIHRvcGljSW5wdXQucXVlcnlTZWxlY3RvcignLmlucHV0LXBsYWNlaG9sZGVyJykuaW5uZXJIVE1MID0gZS50YXJnZXQuaW5uZXJIVE1MO1xuICAgICAgICAgIHRvcGljSW5wdXQucXVlcnlTZWxlY3RvcignI2Zvcm0tdG9waWMnKS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgZS50YXJnZXQuaW5uZXJIVE1MKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldClcbiAgICAgICAgdG9waWNJbnB1dC5jbGFzc0xpc3QudG9nZ2xlKCd0b3BpY19fZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgICBcbiAgfVxuXG4gIC8vIHRlbXBsYXRlcyBhY2NvcmRpb25cbiAgLy8gY29uc3QgYWNjb3JkaW9uSGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZW1wbGF0ZXNfX2xpc3QtZWxlbWVudC1oZWFkZXInKTtcbiAgLy8gaWYgKGFjY29yZGlvbkhlYWRlcnMpe1xuICAvLyAgICAgYWNjb3JkaW9uSGVhZGVycy5mb3JFYWNoKChoZWFkZXIpID0+IHtcbiAgLy8gICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIC8vICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCd0ZW1wbGF0ZXNfX2xpc3QtZWxlbWVudC0tYWN0aXZlJyk7XG4gIC8vICAgICAgICAgfSk7XG4gIC8vICAgICB9KTtcbiAgLy8gfVxuXG4gIGNsYXNzIEl0Y0FjY29yZGlvbiB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0LCBjb25maWcpIHtcbiAgICAgIHRoaXMuX2VsID0gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgICBjb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgICAgICBhbHdheXNPcGVuOiB0cnVlLFxuICAgICAgICBkdXJhdGlvbjogMzUwXG4gICAgICB9O1xuICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q29uZmlnLCBjb25maWcpO1xuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIoKSB7XG4gICAgICB0aGlzLl9lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGVsSGVhZGVyID0gZS50YXJnZXQuY2xvc2VzdCgnLmFjY29yZGlvbl9faGVhZGVyJyk7XG4gICAgICAgIGlmICghZWxIZWFkZXIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jb25maWcuYWx3YXlzT3Blbikge1xuICAgICAgICAgIGNvbnN0IGVsT3Blbkl0ZW0gPSB0aGlzLl9lbC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uX19pdGVtX3Nob3cnKTtcbiAgICAgICAgICBpZiAoZWxPcGVuSXRlbSkge1xuICAgICAgICAgICAgZWxPcGVuSXRlbSAhPT0gZWxIZWFkZXIucGFyZW50RWxlbWVudCA/IHRoaXMudG9nZ2xlKGVsT3Blbkl0ZW0pIDogbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b2dnbGUoZWxIZWFkZXIucGFyZW50RWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgc2hvdyhlbCkge1xuICAgICAgY29uc3QgZWxCb2R5ID0gZWwucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbl9fYm9keScpO1xuICAgICAgaWYgKGVsQm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbGxhcHNpbmcnKSB8fCBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlvbl9faXRlbV9zaG93JykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWxCb2R5LnN0eWxlWydkaXNwbGF5J10gPSAnYmxvY2snO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gZWxCb2R5Lm9mZnNldEhlaWdodDtcbiAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAwO1xuICAgICAgZWxCb2R5LnN0eWxlWydvdmVyZmxvdyddID0gJ2hpZGRlbic7XG4gICAgICBlbEJvZHkuc3R5bGVbJ3RyYW5zaXRpb24nXSA9IGBoZWlnaHQgJHt0aGlzLl9jb25maWcuZHVyYXRpb259bXMgZWFzZWA7XG4gICAgICBlbEJvZHkuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2luZycpO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYWNjb3JkaW9uX19pdGVtX3NsaWRlZG93bicpO1xuICAgICAgZWxCb2R5Lm9mZnNldEhlaWdodDtcbiAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2luZycpO1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRpb25fX2l0ZW1fc2xpZGVkb3duJyk7XG4gICAgICAgIGVsQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ2Rpc3BsYXknXSA9ICcnO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ2hlaWdodCddID0gJyc7XG4gICAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gJyc7XG4gICAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICcnO1xuICAgICAgfSwgdGhpcy5fY29uZmlnLmR1cmF0aW9uKTtcbiAgICB9XG4gICAgaGlkZShlbCkge1xuICAgICAgY29uc3QgZWxCb2R5ID0gZWwucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbl9fYm9keScpO1xuICAgICAgaWYgKGVsQm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvbGxhcHNpbmcnKSB8fCAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSBgJHtlbEJvZHkub2Zmc2V0SGVpZ2h0fXB4YDtcbiAgICAgIGVsQm9keS5vZmZzZXRIZWlnaHQ7XG4gICAgICBlbEJvZHkuc3R5bGVbJ2Rpc3BsYXknXSA9ICdibG9jayc7XG4gICAgICBlbEJvZHkuc3R5bGVbJ2hlaWdodCddID0gMDtcbiAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICdoaWRkZW4nO1xuICAgICAgZWxCb2R5LnN0eWxlWyd0cmFuc2l0aW9uJ10gPSBgaGVpZ2h0ICR7dGhpcy5fY29uZmlnLmR1cmF0aW9ufW1zIGVhc2VgO1xuICAgICAgZWxCb2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNlJyk7XG4gICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpO1xuICAgICAgZWxCb2R5LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNpbmcnKTtcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZWxCb2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNpbmcnKTtcbiAgICAgICAgZWxCb2R5LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlJyk7XG4gICAgICAgIGVsQm9keS5zdHlsZVsnZGlzcGxheSddID0gJyc7XG4gICAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAnJztcbiAgICAgICAgZWxCb2R5LnN0eWxlWyd0cmFuc2l0aW9uJ10gPSAnJztcbiAgICAgICAgZWxCb2R5LnN0eWxlWydvdmVyZmxvdyddID0gJyc7XG4gICAgICB9LCB0aGlzLl9jb25maWcuZHVyYXRpb24pO1xuICAgIH1cbiAgICB0b2dnbGUoZWwpIHtcbiAgICAgIGVsLmNsYXNzTGlzdC5jb250YWlucygnYWNjb3JkaW9uX19pdGVtX3Nob3cnKSA/IHRoaXMuaGlkZShlbCkgOiB0aGlzLnNob3coZWwpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWNjb3JkaW9uJykpIHtcbiAgICBuZXcgSXRjQWNjb3JkaW9uKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb24nKSwge1xuICAgICAgYWx3YXlzT3BlbjogdHJ1ZVxuICAgIH0pO1xuICB9XG5cbiAgLy9jb250ZW50IHNsaWRlclxuICBjb25zdCBzd2lwZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWNvbnRhaW5lcicpOyAvL3N3aXBlci1zbGlkZS1hY3RpdmVcbiAgaWYgKHN3aXBlckNvbnRhaW5lcikge1xuICAgIGNvbnN0IHNsaWRlclNsaWRlID0gc3dpcGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUnKTtcbiAgICBjb25zdCBpbWFnZURlc2MgPSBzd2lwZXJDb250YWluZXIucXVlcnlTZWxlY3RvcignLnAnKTtcbiAgICBpbWFnZURlc2MuaW5uZXJIVE1MID0gc2xpZGVyU2xpZGVbMF0uZ2V0QXR0cmlidXRlKCdhbHQnKTtcblxuICAgIHZhciBjb250ZW50U3dpcGVyID0gbmV3IFN3aXBlcihcIi5jb250ZW50U2xpZGVyXCIsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6IFwiLnN3aXBlci1wYWdpbmF0aW9uXCIsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIsXG4gICAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29udGVudFN3aXBlci5vbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBpbWFnZURlc2MuaW5uZXJIVE1MID0gc2xpZGVyU2xpZGVbY29udGVudFN3aXBlci5hY3RpdmVJbmRleF0uZ2V0QXR0cmlidXRlKCdhbHQnKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHNsaWRlclByZXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyUHJldicpO1xuICAgIGNvbnN0IHNsaWRlck5leHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyTmV4dCcpO1xuICAgIHNsaWRlclByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb250ZW50U3dpcGVyLnNsaWRlUHJldigpO1xuICAgIH0pO1xuICAgIHNsaWRlck5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb250ZW50U3dpcGVyLnNsaWRlTmV4dCgpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIG51bWJlcnMgY291bnRlciArK1xuICBsZXQgbnVtYmVyc1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm51bWJlcnNfX3RpdGxlJyk7XG5cbiAgY29uc3Qgb2JzZXJ2ZXJPcHRpb25zID0ge1xuICAgIHJvb3RNYXJnaW46ICcwcHggMHB4IC0xMCUgMHB4JyxcbiAgICB0aHJlc2hvbGQ6IDAsXG4gIH1cblxuICBpZiAobnVtYmVyc1RpdGxlLmxlbmd0aCAhPSAwKSB7XG4gICAgbnVtYmVyc1RpdGxlLmZvckVhY2goKHRpdGxlKSA9PiB7XG4gICAgICB0aXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZW5kLWNvdW50ZXInLCB0aXRsZS5pbm5lckhUTUwpO1xuICAgICAgdGl0bGUuaW5uZXJIVE1MID0gMDtcbiAgICB9KTtcblxuICAgIGNvbnN0IG51bWJlcnNDb3VudGVyQ2FsbGJhY2sgPSAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldCk7XG4gICAgICAgICAgbnVtYmVyc1RpdGxlLmZvckVhY2goKHRpdGxlKSA9PiB7XG4gICAgICAgICAgICBudW1iZXJDb3VudGVyKHRpdGxlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbnVtYmVyT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIobnVtYmVyc0NvdW50ZXJDYWxsYmFjaywgb2JzZXJ2ZXJPcHRpb25zKTtcblxuICAgIG51bWJlck9ic2VydmVyLm9ic2VydmUobnVtYmVyc1RpdGxlWzBdKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG51bWJlckNvdW50ZXIodGl0bGUpIHtcbiAgICBsZXQgbnVtYmVyID0gdGl0bGUuZ2V0QXR0cmlidXRlKCdkYXRhLWVuZC1jb3VudGVyJykucmVwbGFjZSgvW14wLTldL2csIFwiXCIpO1xuICAgIGxldCBzeW1ib2wgPSB0aXRsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZW5kLWNvdW50ZXInKS5yZXBsYWNlKC9bMC05XS9nLCBcIlwiKTtcblxuICAgIGxldCBuID0gMDtcbiAgICBsZXQgc3RlcCA9IG51bWJlciA8IDEwMCA/IDEgOiAxMDtcblxuICAgIGxldCB0ID0gc3RlcCA9PT0gMSA/IDUwIDogMTA7XG5cbiAgICBsZXQgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBuICs9IHN0ZXA7XG4gICAgICB0aXRsZS5pbm5lckhUTUwgPSBuICsgc3ltYm9sO1xuICAgICAgaWYgKG4gPT0gbnVtYmVyKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH0sIHQpXG5cbiAgICB0aXRsZS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtZW5kLWNvdW50ZXInKTtcbiAgfVxuXG4gIC8vcGFydG5lcnNcbiAgY29uc3QgcGFydG5lcnNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcnRuZXJzX19saXN0Jyk7XG5cbiAgaWYgKHBhcnRuZXJzTGlzdCkge1xuICAgIGNvbnN0IHBhcnRuZXJzTGlzdENhbGxiYWNrID0gKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xuICAgICAgICAgIGxvYWRQYXJ0bmVycyhwYXJ0bmVyc0xpc3QpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0bmVyc0xpc3RPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihwYXJ0bmVyc0xpc3RDYWxsYmFjaywgb2JzZXJ2ZXJPcHRpb25zKTtcblxuICAgIHBhcnRuZXJzTGlzdE9ic2VydmVyLm9ic2VydmUocGFydG5lcnNMaXN0KTtcblxuICAgIGZ1bmN0aW9uIGxvYWRQYXJ0bmVycyhwYXJ0bmVyc0xpc3QpIHtcbiAgICAgIGNvbnN0IGFsbFBhcnRuZXJzID0gcGFydG5lcnNMaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJ0bmVyc19fbGlzdC1lbGVtZW50Jyk7XG4gICAgICBhbGxQYXJ0bmVycy5mb3JFYWNoKChlbCwgaWR4KSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge2VsLmNsYXNzTGlzdC5hZGQoJ2xvYWQnKTt9LCBpZHggKiAoYWxsUGFydG5lcnMubGVuZ3RoICsgODApICsgMjUwKVxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcFVwLW1vZGFsJyk7XG4gIGNvbnN0IHBvcFVwQmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3BVcC1iYWNrZ3JvdW5kJyk7XG4gIGNvbnN0IG9wZW5Nb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5xdWljay1jb25zdWx0Jyk7XG4gIGNvbnN0IGNsb3NlTW9kYWxCdG4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtbW9kYWwnKTtcblxuICBvcGVuTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tc2hvdycpO1xuICAgIHBvcFVwQmFjay5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tY2xvc2UnKTtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgcG9wVXBCYWNrLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1vcGVuJyk7XG4gICAgXG4gICAgcG9wVXBCYWNrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXNob3cnKTtcbiAgICAgIHBvcFVwQmFjay5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tb3BlbicpO1xuICAgICAgcG9wVXBCYWNrLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1jbG9zZScpO1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcbiAgICB9KTtcbiAgfSk7XG4gIGNsb3NlTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLXNob3cnKTtcbiAgICBwb3BVcEJhY2suY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLW9wZW4nKTtcbiAgICBwb3BVcEJhY2suY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWNsb3NlJyk7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcbiAgfSk7XG5cbiAgY29uc3QgcmV2aWV3c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmV2aWV3X19pbmZvJyk7XG5cbiAgaWYgKHJldmlld3NMaXN0Lmxlbmd0aCA+IDApe1xuICAgIHJldmlld3NMaXN0LmZvckVhY2goKHJldmlldykgPT4ge1xuICAgICAgY29uc3QgYnRuID0gcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5yZXZpZXdfX3ZpZXctZnVsbC1idG4nKTtcbiAgICAgIGxldCByZXZpZXdIZWlnaHQgPSByZXZpZXcucXVlcnlTZWxlY3RvcignLnJldmlld19fdGV4dCcpLnNjcm9sbEhlaWdodDtcbiAgICAgIGxldCByZXZpZXdUZXh0ID0gcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5yZXZpZXdfX3RleHQnKTtcbiAgICAgIGlmIChyZXZpZXdIZWlnaHQgPD0gMTQwKXtcbiAgICAgICAgYnRuLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgfVxuXG4gICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBsZXQgcmV2aWV3SGVpZ2h0ID0gcmV2aWV3LnF1ZXJ5U2VsZWN0b3IoJy5yZXZpZXdfX3RleHQnKS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYocmV2aWV3VGV4dC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSl7XG4gICAgICAgICAgcmV2aWV3VGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gICAgICAgICAgcmV2aWV3VGV4dC5zdHlsZS5oZWlnaHQgPSAxNDAgKyAncHgnO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXZpZXdUZXh0LmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgICByZXZpZXdUZXh0LnN0eWxlLmhlaWdodCA9IGAke3Jldmlld0hlaWdodH1weGA7XG4gICAgICAgIH1cblxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxufSk7XG5cbiJdfQ==
