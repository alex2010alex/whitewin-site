"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
document.addEventListener('DOMContentLoaded', function () {
  var setLangBtn = document.querySelector('.switch-language__btn');
  var setLangDropdown = document.querySelector('.switch-language__dropdown');
  var setLangDropdownEls = document.querySelectorAll('.switch-language__dropdown-element');
  var menuBackdrop = document.querySelector('.backdrop');
  var menuDropdownLink = document.querySelector('.menu-item__dropdown');
  var header = document.querySelector('.header');
  setLangBtn.addEventListener('click', function (e) {
    e.preventDefault();
    setLangDropdown.classList.toggle('switch-language__dropdown--active');
    if (!header.classList.contains('header__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
    });
  });
  menuDropdownLink.addEventListener('click', function (e) {
    e.preventDefault();
    if (!setLangDropdown.classList.contains('switch-language__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    header.classList.toggle('header__dropdown--active');
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      header.classList.remove('header__dropdown--active');
    });
  });

  //mobile menu
  var burgerBtn = header.querySelector('.burger-btn');
  burgerBtn.addEventListener('click', function () {
    header.classList.toggle('mobile-menu--active');
    if (header.classList.contains('mobile-menu--active')) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'visible';
    }
  });
  var mobileDropdownBtns = header.querySelectorAll('.mobile-menu__dropdown-btn');
  mobileDropdownBtns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.classList.toggle('mobile-dropdown--active');
    });
  });
  var formTopicInput = document.querySelector('.form__topic');
  var formTopicDropdown = document.querySelector('.topic__dropdown');
  if (formTopicInput) {
    formTopicInput.addEventListener('click', function (e) {
      if (e.target.classList.contains('topic__dropdown-item')) {
        formTopicInput.querySelector('.input-placeholder').innerHTML = e.target.innerHTML;
        formTopicInput.querySelector('#form-topic').setAttribute('value', e.target.innerHTML);
      }
      console.log(e.target);
      formTopicInput.classList.toggle('topic__dropdown--active');
    });
  }

  // templates accordion
  // const accordionHeaders = document.querySelectorAll('.templates__list-element-header');
  // if (accordionHeaders){
  //     accordionHeaders.forEach((header) => {
  //         header.addEventListener('click', () => {
  //             header.classList.toggle('templates__list-element--active');
  //         });
  //     });
  // }
  var ItcAccordion = /*#__PURE__*/function () {
    function ItcAccordion(target, config) {
      _classCallCheck(this, ItcAccordion);
      this._el = typeof target === 'string' ? document.querySelector(target) : target;
      var defaultConfig = {
        alwaysOpen: true,
        duration: 350
      };
      this._config = Object.assign(defaultConfig, config);
      this.addEventListener();
    }
    _createClass(ItcAccordion, [{
      key: "addEventListener",
      value: function addEventListener() {
        var _this = this;
        this._el.addEventListener('click', function (e) {
          var elHeader = e.target.closest('.accordion__header');
          if (!elHeader) {
            return;
          }
          if (!_this._config.alwaysOpen) {
            var elOpenItem = _this._el.querySelector('.accordion__item_show');
            if (elOpenItem) {
              elOpenItem !== elHeader.parentElement ? _this.toggle(elOpenItem) : null;
            }
          }
          _this.toggle(elHeader.parentElement);
        });
      }
    }, {
      key: "show",
      value: function show(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['display'] = 'block';
        var height = elBody.offsetHeight;
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.add('collapsing');
        el.classList.add('accordion__item_slidedown');
        elBody.offsetHeight;
        elBody.style['height'] = "".concat(height, "px");
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          el.classList.remove('accordion__item_slidedown');
          elBody.classList.add('collapse');
          el.classList.add('accordion__item_show');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "hide",
      value: function hide(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || !el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['height'] = "".concat(elBody.offsetHeight, "px");
        elBody.offsetHeight;
        elBody.style['display'] = 'block';
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.remove('collapse');
        el.classList.remove('accordion__item_show');
        elBody.classList.add('collapsing');
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          elBody.classList.add('collapse');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "toggle",
      value: function toggle(el) {
        el.classList.contains('accordion__item_show') ? this.hide(el) : this.show(el);
      }
    }]);
    return ItcAccordion;
  }();
  new ItcAccordion(document.querySelector('.accordion'), {
    alwaysOpen: true
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRMYW5nQnRuIiwicXVlcnlTZWxlY3RvciIsInNldExhbmdEcm9wZG93biIsInNldExhbmdEcm9wZG93bkVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtZW51QmFja2Ryb3AiLCJtZW51RHJvcGRvd25MaW5rIiwiaGVhZGVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJidXJnZXJCdG4iLCJib2R5Iiwic3R5bGUiLCJvdmVyZmxvdyIsIm1vYmlsZURyb3Bkb3duQnRucyIsImZvckVhY2giLCJidG4iLCJmb3JtVG9waWNJbnB1dCIsImZvcm1Ub3BpY0Ryb3Bkb3duIiwidGFyZ2V0IiwiaW5uZXJIVE1MIiwic2V0QXR0cmlidXRlIiwiY29uc29sZSIsImxvZyIsIkl0Y0FjY29yZGlvbiIsImNvbmZpZyIsIl9jbGFzc0NhbGxDaGVjayIsIl9lbCIsImRlZmF1bHRDb25maWciLCJhbHdheXNPcGVuIiwiZHVyYXRpb24iLCJfY29uZmlnIiwiT2JqZWN0IiwiYXNzaWduIiwiX2NyZWF0ZUNsYXNzIiwia2V5IiwidmFsdWUiLCJfdGhpcyIsImVsSGVhZGVyIiwiY2xvc2VzdCIsImVsT3Blbkl0ZW0iLCJwYXJlbnRFbGVtZW50Iiwic2hvdyIsImVsIiwiZWxCb2R5IiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiY29uY2F0IiwiYWRkIiwid2luZG93Iiwic2V0VGltZW91dCIsImhpZGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUFBLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsWUFBTTtFQUNoRCxJQUFNQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0csYUFBYSxDQUFDLHVCQUF1QixDQUFDO0VBQ2xFLElBQU1DLGVBQWUsR0FBR0osUUFBUSxDQUFDRyxhQUFhLENBQUMsNEJBQTRCLENB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SyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7VUFDM0JnQyxNQUFNLENBQUNoQyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRTtVQUMvQmdDLE1BQU0sQ0FBQ2hDLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQy9CLENBQUMsRUFBRSxJQUFJLENBQUNtQixPQUFPLENBQUNELFFBQVEsQ0FBQztNQUMzQjtJQUFDO01BQUFLLEdBQUE7TUFBQUMsS0FBQSxFQUNELFNBQUE3QixPQUFPb0MsRUFBRSxFQUFFO1FBQ1RBLEVBQUUsQ0FBQ3JDLFNBQVMsQ0FBQ0UsUUFBUSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsSUFBSSxDQUFDMkMsSUFBSSxDQUFDUixFQUFFLENBQUMsR0FBRyxJQUFJLENBQUNELElBQUksQ0FBQ0MsRUFBRSxDQUFDO01BQy9FO0lBQUM7SUFBQSxPQUFBbkIsWUFBQTtFQUFBO0VBR0gsSUFBSUEsWUFBWSxDQUFDOUIsUUFBUSxDQUFDRyxhQUFhLENBQUMsWUFBWSxDQUFDLEVBQUU7SUFDckRnQyxVQUFVLEVBQUU7RUFDZCxDQUFDLENBQUM7QUFDUixDQUFDLENBQUMiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgY29uc3Qgc2V0TGFuZ0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2gtbGFuZ3VhZ2VfX2J0bicpO1xuICAgIGNvbnN0IHNldExhbmdEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duJyk7XG4gICAgY29uc3Qgc2V0TGFuZ0Ryb3Bkb3duRWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tZWxlbWVudCcpO1xuXG4gICAgY29uc3QgbWVudUJhY2tkcm9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhY2tkcm9wJyk7XG5cbiAgICBjb25zdCBtZW51RHJvcGRvd25MaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbV9fZHJvcGRvd24nKTtcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyk7XG5cbiAgICBzZXRMYW5nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZXRMYW5nRHJvcGRvd24uY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgICAgIGlmICghaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyX19kcm9wZG93bi0tYWN0aXZlJykpe1xuICAgICAgICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC50b2dnbGUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBtZW51QmFja2Ryb3AuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgICAgICAgICAgc2V0TGFuZ0Ryb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgICAgICB9KVxuICAgIH0pO1xuXG4gICAgbWVudURyb3Bkb3duTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCFzZXRMYW5nRHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duLS1hY3RpdmUnKSl7XG4gICAgICAgICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnRvZ2dsZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICAgICAgbWVudUJhY2tkcm9wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICAgICAgfSlcbiAgICB9KTtcblxuICAgIC8vbW9iaWxlIG1lbnVcbiAgICBjb25zdCBidXJnZXJCdG4gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmJ1cmdlci1idG4nKTtcbiAgICBidXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUtbWVudS0tYWN0aXZlJyk7XG4gICAgICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2JpbGUtbWVudS0tYWN0aXZlJykpe1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBtb2JpbGVEcm9wZG93bkJ0bnMgPSBoZWFkZXIucXVlcnlTZWxlY3RvckFsbCgnLm1vYmlsZS1tZW51X19kcm9wZG93bi1idG4nKTtcbiAgICBtb2JpbGVEcm9wZG93bkJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUtZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9KVxuXG4gICAgY29uc3QgZm9ybVRvcGljSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fdG9waWMnKTtcbiAgICBjb25zdCBmb3JtVG9waWNEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BpY19fZHJvcGRvd24nKTtcbiAgICBpZiAoZm9ybVRvcGljSW5wdXQpe1xuICAgICAgICBmb3JtVG9waWNJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b3BpY19fZHJvcGRvd24taXRlbScpKXtcbiAgICAgICAgICAgICAgICBmb3JtVG9waWNJbnB1dC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtcGxhY2Vob2xkZXInKS5pbm5lckhUTUwgPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgZm9ybVRvcGljSW5wdXQucXVlcnlTZWxlY3RvcignI2Zvcm0tdG9waWMnKS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgZS50YXJnZXQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KVxuICAgICAgICAgICAgZm9ybVRvcGljSW5wdXQuY2xhc3NMaXN0LnRvZ2dsZSgndG9waWNfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gdGVtcGxhdGVzIGFjY29yZGlvblxuICAgIC8vIGNvbnN0IGFjY29yZGlvbkhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVtcGxhdGVzX19saXN0LWVsZW1lbnQtaGVhZGVyJyk7XG4gICAgLy8gaWYgKGFjY29yZGlvbkhlYWRlcnMpe1xuICAgIC8vICAgICBhY2NvcmRpb25IZWFkZXJzLmZvckVhY2goKGhlYWRlcikgPT4ge1xuICAgIC8vICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIC8vICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCd0ZW1wbGF0ZXNfX2xpc3QtZWxlbWVudC0tYWN0aXZlJyk7XG4gICAgLy8gICAgICAgICB9KTtcbiAgICAvLyAgICAgfSk7XG4gICAgLy8gfVxuXG5cbiAgICBjbGFzcyBJdGNBY2NvcmRpb24ge1xuICAgICAgICBjb25zdHJ1Y3Rvcih0YXJnZXQsIGNvbmZpZykge1xuICAgICAgICAgIHRoaXMuX2VsID0gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdENvbmZpZyA9IHtcbiAgICAgICAgICAgIGFsd2F5c09wZW46IHRydWUsXG4gICAgICAgICAgICBkdXJhdGlvbjogMzUwXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcigpIHtcbiAgICAgICAgICB0aGlzLl9lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbEhlYWRlciA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hY2NvcmRpb25fX2hlYWRlcicpO1xuICAgICAgICAgICAgaWYgKCFlbEhlYWRlcikge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NvbmZpZy5hbHdheXNPcGVuKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsT3Blbkl0ZW0gPSB0aGlzLl9lbC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uX19pdGVtX3Nob3cnKTtcbiAgICAgICAgICAgICAgaWYgKGVsT3Blbkl0ZW0pIHtcbiAgICAgICAgICAgICAgICBlbE9wZW5JdGVtICE9PSBlbEhlYWRlci5wYXJlbnRFbGVtZW50ID8gdGhpcy50b2dnbGUoZWxPcGVuSXRlbSkgOiBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZShlbEhlYWRlci5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzaG93KGVsKSB7XG4gICAgICAgICAgY29uc3QgZWxCb2R5ID0gZWwucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbl9fYm9keScpO1xuICAgICAgICAgIGlmIChlbEJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzaW5nJykgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsQm9keS5zdHlsZVsnZGlzcGxheSddID0gJ2Jsb2NrJztcbiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBlbEJvZHkub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAwO1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICdoaWRkZW4nO1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gYGhlaWdodCAke3RoaXMuX2NvbmZpZy5kdXJhdGlvbn1tcyBlYXNlYDtcbiAgICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2luZycpO1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlvbl9faXRlbV9zbGlkZWRvd24nKTtcbiAgICAgICAgICBlbEJvZHkub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSBgJHtoZWlnaHR9cHhgO1xuICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGVsQm9keS5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRpb25fX2l0ZW1fc2xpZGVkb3duJyk7XG4gICAgICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlvbl9faXRlbV9zaG93Jyk7XG4gICAgICAgICAgICBlbEJvZHkuc3R5bGVbJ2Rpc3BsYXknXSA9ICcnO1xuICAgICAgICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9ICcnO1xuICAgICAgICAgICAgZWxCb2R5LnN0eWxlWyd0cmFuc2l0aW9uJ10gPSAnJztcbiAgICAgICAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICcnO1xuICAgICAgICAgIH0sIHRoaXMuX2NvbmZpZy5kdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaGlkZShlbCkge1xuICAgICAgICAgIGNvbnN0IGVsQm9keSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb25fX2JvZHknKTtcbiAgICAgICAgICBpZiAoZWxCb2R5LmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2luZycpIHx8ICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlvbl9faXRlbV9zaG93JykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9IGAke2VsQm9keS5vZmZzZXRIZWlnaHR9cHhgO1xuICAgICAgICAgIGVsQm9keS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgZWxCb2R5LnN0eWxlWydkaXNwbGF5J10gPSAnYmxvY2snO1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAwO1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICdoaWRkZW4nO1xuICAgICAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gYGhlaWdodCAke3RoaXMuX2NvbmZpZy5kdXJhdGlvbn1tcyBlYXNlYDtcbiAgICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2UnKTtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpO1xuICAgICAgICAgIGVsQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZWxCb2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNpbmcnKTtcbiAgICAgICAgICAgIGVsQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xuICAgICAgICAgICAgZWxCb2R5LnN0eWxlWydkaXNwbGF5J10gPSAnJztcbiAgICAgICAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAnJztcbiAgICAgICAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gJyc7XG4gICAgICAgICAgICBlbEJvZHkuc3R5bGVbJ292ZXJmbG93J10gPSAnJztcbiAgICAgICAgICB9LCB0aGlzLl9jb25maWcuZHVyYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZShlbCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5jb250YWlucygnYWNjb3JkaW9uX19pdGVtX3Nob3cnKSA/IHRoaXMuaGlkZShlbCkgOiB0aGlzLnNob3coZWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG5ldyBJdGNBY2NvcmRpb24oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbicpLCB7XG4gICAgICAgIGFsd2F5c09wZW46IHRydWVcbiAgICAgIH0pO1xufSk7XG5cbiJdfQ==
