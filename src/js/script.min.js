"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
document.addEventListener('DOMContentLoaded', function () {
  var setLangBtn = document.querySelector('.switch-language__btn');
  var setLangDropdown = document.querySelector('.switch-language__dropdown');
  var setLangDropdownEls = document.querySelectorAll('.switch-language__dropdown-element');
  var menuBackdrop = document.querySelector('.backdrop');
  var menuDropdownLink = document.querySelector('.menu-item__dropdown');
  var header = document.querySelector('.header');
  setLangBtn.addEventListener('click', function (e) {
    e.preventDefault();
    setLangDropdown.classList.toggle('switch-language__dropdown--active');
    if (!header.classList.contains('header__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
    });
  });
  setLangDropdownEls.forEach(function (el) {
    el.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
      var currentLang = setLangBtn.querySelector('p').innerHTML;
      setLangBtn.querySelector('p').innerHTML = el.innerHTML;
      el.innerHTML = currentLang;
    });
  });
  menuDropdownLink.addEventListener('click', function (e) {
    e.preventDefault();
    if (!setLangDropdown.classList.contains('switch-language__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    header.classList.toggle('header__dropdown--active');
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      header.classList.remove('header__dropdown--active');
    });
  });

  //mobile menu
  var burgerBtn = header.querySelector('.burger-btn');
  burgerBtn.addEventListener('click', function () {
    header.classList.toggle('mobile-menu--active');
    if (header.classList.contains('mobile-menu--active')) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'visible';
    }
  });
  var mobileDropdownBtns = header.querySelectorAll('.mobile-menu__dropdown-btn');
  mobileDropdownBtns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.classList.toggle('mobile-dropdown--active');
    });
  });
  var formTopicInput = document.querySelectorAll('.form__topic');
  var formTopicDropdown = document.querySelector('.topic__dropdown');
  if (formTopicInput) {
    formTopicInput.forEach(function (topicInput) {
      topicInput.addEventListener('click', function (e) {
        if (e.target.classList.contains('topic__dropdown-item')) {
          topicInput.querySelector('.input-placeholder').innerHTML = e.target.innerHTML;
          topicInput.querySelector('#form-topic').setAttribute('value', e.target.innerHTML);
        }
        console.log(e.target);
        topicInput.classList.toggle('topic__dropdown--active');
      });
    });
  }

  // templates accordion
  // const accordionHeaders = document.querySelectorAll('.templates__list-element-header');
  // if (accordionHeaders){
  //     accordionHeaders.forEach((header) => {
  //         header.addEventListener('click', () => {
  //             header.classList.toggle('templates__list-element--active');
  //         });
  //     });
  // }
  var ItcAccordion = /*#__PURE__*/function () {
    function ItcAccordion(target, config) {
      _classCallCheck(this, ItcAccordion);
      this._el = typeof target === 'string' ? document.querySelector(target) : target;
      var defaultConfig = {
        alwaysOpen: true,
        duration: 350
      };
      this._config = Object.assign(defaultConfig, config);
      this.addEventListener();
    }
    _createClass(ItcAccordion, [{
      key: "addEventListener",
      value: function addEventListener() {
        var _this = this;
        this._el.addEventListener('click', function (e) {
          var elHeader = e.target.closest('.accordion__header');
          if (!elHeader) {
            return;
          }
          if (!_this._config.alwaysOpen) {
            var elOpenItem = _this._el.querySelector('.accordion__item_show');
            if (elOpenItem) {
              elOpenItem !== elHeader.parentElement ? _this.toggle(elOpenItem) : null;
            }
          }
          _this.toggle(elHeader.parentElement);
        });
      }
    }, {
      key: "show",
      value: function show(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['display'] = 'block';
        var height = elBody.offsetHeight;
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.add('collapsing');
        el.classList.add('accordion__item_slidedown');
        elBody.offsetHeight;
        elBody.style['height'] = "".concat(height, "px");
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          el.classList.remove('accordion__item_slidedown');
          elBody.classList.add('collapse');
          el.classList.add('accordion__item_show');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "hide",
      value: function hide(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || !el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['height'] = "".concat(elBody.offsetHeight, "px");
        elBody.offsetHeight;
        elBody.style['display'] = 'block';
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.remove('collapse');
        el.classList.remove('accordion__item_show');
        elBody.classList.add('collapsing');
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          elBody.classList.add('collapse');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "toggle",
      value: function toggle(el) {
        el.classList.contains('accordion__item_show') ? this.hide(el) : this.show(el);
      }
    }]);
    return ItcAccordion;
  }();
  if (document.querySelector('#accordion')) {
    new ItcAccordion(document.querySelector('.accordion'), {
      alwaysOpen: true
    });
  }

  //content slider
  var swiperContainer = document.querySelector('.slider-container'); //swiper-slide-active
  if (swiperContainer) {
    var sliderSlide = swiperContainer.querySelectorAll('.swiper-slide');
    var imageDesc = swiperContainer.querySelector('.p');
    imageDesc.innerHTML = sliderSlide[0].getAttribute('alt');
    var contentSwiper = new Swiper(".contentSlider", {
      pagination: {
        el: ".swiper-pagination",
        clickable: true
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev"
      }
    });
    contentSwiper.on('slideChange', function () {
      imageDesc.innerHTML = sliderSlide[contentSwiper.activeIndex].getAttribute('alt');
    });
    var sliderPrev = document.querySelector('.sliderPrev');
    var sliderNext = document.querySelector('.sliderNext');
    sliderPrev.addEventListener('click', function () {
      contentSwiper.slidePrev();
    });
    sliderNext.addEventListener('click', function () {
      contentSwiper.slideNext();
    });
  }
  ;

  // numbers counter ++
  var numbersTitle = document.querySelectorAll('.numbers__title');
  var observerOptions = {
    rootMargin: '0px 0px -10% 0px',
    threshold: 0
  };
  if (numbersTitle.length != 0) {
    numbersTitle.forEach(function (title) {
      title.setAttribute('data-end-counter', title.innerHTML);
      title.innerHTML = 0;
    });
    var numbersCounterCallback = function numbersCounterCallback(entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          numbersTitle.forEach(function (title) {
            numberCounter(title);
          });
        }
      });
    };
    var numberObserver = new IntersectionObserver(numbersCounterCallback, observerOptions);
    numberObserver.observe(numbersTitle[0]);
  }
  function numberCounter(title) {
    var number = title.getAttribute('data-end-counter').replace(/[^0-9]/g, "");
    var symbol = title.getAttribute('data-end-counter').replace(/[0-9]/g, "");
    var n = 0;
    var step = number < 100 ? 1 : 10;
    var t = step === 1 ? 50 : 10;
    var interval = setInterval(function () {
      n += step;
      title.innerHTML = n + symbol;
      if (n == number) {
        clearInterval(interval);
      }
    }, t);
    title.removeAttribute('data-end-counter');
  }

  //partners
  var partnersList = document.querySelector('.partners__list');
  if (partnersList) {
    var loadPartners = function loadPartners(partnersList) {
      var allPartners = partnersList.querySelectorAll('.partners__list-element');
      allPartners.forEach(function (el, idx) {
        setTimeout(function () {
          el.classList.add('load');
        }, idx * (allPartners.length + 80) + 250);
      });
    };
    var partnersListCallback = function partnersListCallback(entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          loadPartners(partnersList);
        }
      });
    };
    var partnersListObserver = new IntersectionObserver(partnersListCallback, observerOptions);
    partnersListObserver.observe(partnersList);
    ;
  }
  var modal = document.querySelector('.popUp-modal');
  var popUpBack = document.querySelector('.popUp-background');
  var openModalBtn = document.querySelector('.quick-consult');
  var closeModalBtn = modal.querySelector('.close-modal');
  openModalBtn.addEventListener('click', function () {
    modal.classList.add('modal--show');
    popUpBack.classList.remove('modal--close');
    popUpBack.classList.add('modal--open');
    popUpBack.addEventListener('click', function () {
      modal.classList.remove('modal--show');
      popUpBack.classList.remove('modal--open');
      popUpBack.classList.add('modal--close');
    });
  });
  closeModalBtn.addEventListener('click', function () {
    modal.classList.remove('modal--show');
    popUpBack.classList.remove('modal--open');
    popUpBack.classList.add('modal--close');
  });
  var reviewsList = document.querySelectorAll('.review__info');
  if (reviewsList.length > 0) {
    reviewsList.forEach(function (review) {
      var btn = review.querySelector('.review__view-full-btn');
      var reviewHeight = review.querySelector('.review__text').scrollHeight;
      var reviewText = review.querySelector('.review__text');
      if (reviewHeight <= 140) {
        btn.style.opacity = 0;
      }
      btn.addEventListener('click', function (e) {
        var reviewHeight = review.querySelector('.review__text').scrollHeight;
        e.preventDefault();
        if (reviewText.classList.contains('open')) {
          reviewText.classList.remove('open');
          reviewText.style.height = 140 + 'px';
        } else {
          reviewText.classList.add('open');
          reviewText.style.height = "".concat(reviewHeight, "px");
        }
      });
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRMYW5nQnRuIiwicXVlcnlTZWxlY3RvciIsInNldExhbmdEcm9wZG93biIsInNldExhbmdEcm9wZG93bkVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtZW51QmFja2Ryb3AiLCJtZW51RHJvcGRvd25MaW5rIiwiaGVhZGVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJmb3JFYWNoIiwiZWwiLCJjdXJyZW50TGFuZyIsImlubmVySFRNTCIsImJ1cmdlckJ0biIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwibW9iaWxlRHJvcGRvd25CdG5zIiwiYnRuIiwiZm9ybVRvcGljSW5wdXQiLCJmb3JtVG9waWNEcm9wZG93biIsInRvcGljSW5wdXQiLCJ0YXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJjb25zb2xlIiwibG9nIiwiSXRjQWNjb3JkaW9uIiwiY29uZmlnIiwiX2NsYXNzQ2FsbENoZWNrIiwiX2VsIiwiZGVmYXVsdENvbmZpZyIsImFsd2F5c09wZW4iLCJkdXJhdGlvbiIsIl9jb25maWciLCJPYmplY3QiLCJhc3NpZ24iLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsIl90aGlzIiwiZWxIZWFkZXIiLCJjbG9zZXN0IiwiZWxPcGVuSXRlbSIsInBhcmVudEVsZW1lbnQiLCJzaG93IiwiZWxCb2R5IiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiY29uY2F0IiwiYWRkIiwid2luZG93Iiwic2V0VGltZW91dCIsImhpZGUiLCJzd2lwZXJDb250YWluZXIiLCJzbGlkZXJTbGlkZSIsImltYWdlRGVzYyIsImdldEF0dHJpYnV0ZSIsImNvbnRlbnRTd2lwZXIiLCJTd2lwZXIiLCJwYWdpbmF0aW9uIiwiY2xpY2thYmxlIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIm9uIiwiYWN0aXZlSW5kZXgiLCJzbGlkZXJQcmV2Iiwic2xpZGVyTmV4dCIsInNsaWRlUHJldiIsInNsaWRlTmV4dCIsIm51bWJlcnNUaXRsZSIsIm9ic2VydmVyT3B0aW9ucyIsInJvb3RNYXJnaW4iLCJ0aHJlc2hvbGQiLCJsZW5ndGgiLCJ0aXRsZSIsIm51bWJlcnNDb3VudGVyQ2FsbGJhY2siLCJlbnRyaWVzIiwib2JzZXJ2ZXIiLCJlbnRyeSIsImlzSW50ZXJzZWN0aW5nIiwidW5vYnNlcnZlIiwibnVtYmVyQ291bnRlciIsIm51bWJlck9ic2VydmVyIiwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlIiwibnVtYmVyIiwicmVwbGFjZSIsInN5bWJvbCIsIm4iLCJzdGVwIiwidCIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQXR0cmlidXRlIiwicGFydG5lcnNMaXN0IiwibG9hZFBhcnRuZXJzIiwiYWxsUGFydG5lcnMiLCJpZHgiLCJwYXJ0bmVyc0xpc3RDYWxsYmFjayIsInBhcnRuZXJzTGlzdE9ic2VydmVyIiwibW9kYWwiLCJwb3BVcEJhY2siLCJvcGVuTW9kYWxCdG4iLCJjbG9zZU1vZGFsQnRuIiwicmV2aWV3c0xpc3QiLCJyZXZpZXciLCJyZXZpZXdIZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJyZXZpZXdUZXh0Iiwib3BhY2l0eSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQUEsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0VBQ2xELElBQU1DLFVBQVUsR0FBR0YsUUFBUSxDQUFDRyxhQUFhLENBQUMsdUJBQXVCLENBQUM7RUFDbEUsSUFBTUMsZUFBZSxHQUFHSixRQUFRLENBQUNHLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQztFQUM1RSxJQUFNRSxrQkFBa0IsR0FBR0wsUUFBUSxDQUFDTSxnQkFBZ0IsQ0FBQyxvQ0FBb0MsQ0FBQztFQUUxRixJQUFNQyxZQUFZLEdBQUdQLFFBQVEsQ0FBQ0csYUFBYSxDQUFDLFdBQVcsQ0FB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QUFHRCxNQUFNLENBQUMvRyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUNpSCxZQUFZO1FBQ3JFMUcsQ0FBQyxDQUFDQyxjQUFjLENBQUMsQ0FBQztRQUNsQixJQUFHMEcsVUFBVSxDQUFDekcsU0FBUyxDQUFDRSxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUM7VUFDdkN1RyxVQUFVLENBQUN6RyxTQUFTLENBQUNHLE1BQU0sQ0FBQyxNQUFNLENBQUM7VUFDbkNzRyxVQUFVLENBQUMvRixLQUFLLENBQUMrQixNQUFNLEdBQUcsR0FBRyxHQUFHLElBQUk7UUFDdEMsQ0FBQyxNQUFJO1VBQ0hnRSxVQUFVLENBQUN6RyxTQUFTLENBQUM0QyxHQUFHLENBQUMsTUFBTSxDQUFDO1VBQ2hDNkQsVUFBVSxDQUFDL0YsS0FBSyxDQUFDK0IsTUFBTSxNQUFBRSxNQUFBLENBQU00RCxZQUFZLE9BQUk7UUFDL0M7TUFFRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSjtBQUNGLENBQUMsQ0FBQyIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3Qgc2V0TGFuZ0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2gtbGFuZ3VhZ2VfX2J0bicpO1xuICBjb25zdCBzZXRMYW5nRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bicpO1xuICBjb25zdCBzZXRMYW5nRHJvcGRvd25FbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bi1lbGVtZW50Jyk7XG5cbiAgY29uc3QgbWVudUJhY2tkcm9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhY2tkcm9wJyk7XG5cbiAgY29uc3QgbWVudURyb3Bkb3duTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW1fX2Ryb3Bkb3duJyk7XG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcblxuICBzZXRMYW5nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0TGFuZ0Ryb3Bkb3duLmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgIGlmICghaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyX19kcm9wZG93bi0tYWN0aXZlJykpIHtcbiAgICAgIG1lbnVCYWNrZHJvcC5jbGFzc0xpc3QudG9nZ2xlKCdiYWNrZHJvcC0tYWN0aXZlJyk7XG4gICAgfVxuICAgIG1lbnVCYWNrZHJvcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG1lbnVCYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKCdiYWNrZHJvcC0tYWN0aXZlJyk7XG4gICAgICBzZXRMYW5nRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgfSlcbiAgfSk7XG5cbiAgc2V0TGFuZ0Ryb3Bkb3duRWxzLmZvckVhY2goKGVsKSA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnJlbW92ZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgICAgc2V0TGFuZ0Ryb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tLWFjdGl2ZScpO1xuXG4gICAgICBsZXQgY3VycmVudExhbmcgPSBzZXRMYW5nQnRuLnF1ZXJ5U2VsZWN0b3IoJ3AnKS5pbm5lckhUTUw7XG4gICAgICBcbiAgICAgIHNldExhbmdCdG4ucXVlcnlTZWxlY3RvcigncCcpLmlubmVySFRNTCA9IGVsLmlubmVySFRNTDtcbiAgICAgIGVsLmlubmVySFRNTCA9IGN1cnJlbnRMYW5nO1xuICAgIH0pO1xuICB9KTtcblxuICBtZW51RHJvcGRvd25MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCFzZXRMYW5nRHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duLS1hY3RpdmUnKSkge1xuICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC50b2dnbGUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICB9XG4gICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fZHJvcGRvd24tLWFjdGl2ZScpO1xuICAgIG1lbnVCYWNrZHJvcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG1lbnVCYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKCdiYWNrZHJvcC0tYWN0aXZlJyk7XG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgfSlcbiAgfSk7XG5cbiAgLy9tb2JpbGUgbWVudVxuICBjb25zdCBidXJnZXJCdG4gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLmJ1cmdlci1idG4nKTtcbiAgYnVyZ2VyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdtb2JpbGUtbWVudS0tYWN0aXZlJyk7XG4gICAgaWYgKGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ21vYmlsZS1tZW51LS1hY3RpdmUnKSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ3Zpc2libGUnO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IG1vYmlsZURyb3Bkb3duQnRucyA9IGhlYWRlci5xdWVyeVNlbGVjdG9yQWxsKCcubW9iaWxlLW1lbnVfX2Ryb3Bkb3duLWJ0bicpO1xuICBtb2JpbGVEcm9wZG93bkJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgYnRuLmNsYXNzTGlzdC50b2dnbGUoJ21vYmlsZS1kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgfSk7XG4gIH0pXG5cbiAgY29uc3QgZm9ybVRvcGljSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9fdG9waWMnKTtcbiAgY29uc3QgZm9ybVRvcGljRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9waWNfX2Ryb3Bkb3duJyk7XG4gIGlmIChmb3JtVG9waWNJbnB1dCkge1xuICAgIGZvcm1Ub3BpY0lucHV0LmZvckVhY2goKHRvcGljSW5wdXQpID0+IHtcbiAgICAgIHRvcGljSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0b3BpY19fZHJvcGRvd24taXRlbScpKSB7XG4gICAgICAgICAgdG9waWNJbnB1dC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtcGxhY2Vob2xkZXInKS5pbm5lckhUTUwgPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICAgICAgdG9waWNJbnB1dC5xdWVyeVNlbGVjdG9yKCcjZm9ybS10b3BpYycpLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBlLnRhcmdldC5pbm5lckhUTUwpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KVxuICAgICAgICB0b3BpY0lucHV0LmNsYXNzTGlzdC50b2dnbGUoJ3RvcGljX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9KVxuICAgIFxuICB9XG5cbiAgLy8gdGVtcGxhdGVzIGFjY29yZGlvblxuICAvLyBjb25zdCBhY2NvcmRpb25IZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlbXBsYXRlc19fbGlzdC1lbGVtZW50LWhlYWRlcicpO1xuICAvLyBpZiAoYWNjb3JkaW9uSGVhZGVycyl7XG4gIC8vICAgICBhY2NvcmRpb25IZWFkZXJzLmZvckVhY2goKGhlYWRlcikgPT4ge1xuICAvLyAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgLy8gICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ3RlbXBsYXRlc19fbGlzdC1lbGVtZW50LS1hY3RpdmUnKTtcbiAgLy8gICAgICAgICB9KTtcbiAgLy8gICAgIH0pO1xuICAvLyB9XG5cbiAgY2xhc3MgSXRjQWNjb3JkaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQsIGNvbmZpZykge1xuICAgICAgdGhpcy5fZWwgPSB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldDtcbiAgICAgIGNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gICAgICAgIGFsd2F5c09wZW46IHRydWUsXG4gICAgICAgIGR1cmF0aW9uOiAzNTBcbiAgICAgIH07XG4gICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKGRlZmF1bHRDb25maWcsIGNvbmZpZyk7XG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcigpIHtcbiAgICAgIHRoaXMuX2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgZWxIZWFkZXIgPSBlLnRhcmdldC5jbG9zZXN0KCcuYWNjb3JkaW9uX19oZWFkZXInKTtcbiAgICAgICAgaWYgKCFlbEhlYWRlcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NvbmZpZy5hbHdheXNPcGVuKSB7XG4gICAgICAgICAgY29uc3QgZWxPcGVuSXRlbSA9IHRoaXMuX2VsLnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb25fX2l0ZW1fc2hvdycpO1xuICAgICAgICAgIGlmIChlbE9wZW5JdGVtKSB7XG4gICAgICAgICAgICBlbE9wZW5JdGVtICE9PSBlbEhlYWRlci5wYXJlbnRFbGVtZW50ID8gdGhpcy50b2dnbGUoZWxPcGVuSXRlbSkgOiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvZ2dsZShlbEhlYWRlci5wYXJlbnRFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBzaG93KGVsKSB7XG4gICAgICBjb25zdCBlbEJvZHkgPSBlbC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uX19ib2R5Jyk7XG4gICAgICBpZiAoZWxCb2R5LmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2luZycpIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucygnYWNjb3JkaW9uX19pdGVtX3Nob3cnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbEJvZHkuc3R5bGVbJ2Rpc3BsYXknXSA9ICdibG9jayc7XG4gICAgICBjb25zdCBoZWlnaHQgPSBlbEJvZHkub2Zmc2V0SGVpZ2h0O1xuICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9IDA7XG4gICAgICBlbEJvZHkuc3R5bGVbJ292ZXJmbG93J10gPSAnaGlkZGVuJztcbiAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gYGhlaWdodCAke3RoaXMuX2NvbmZpZy5kdXJhdGlvbn1tcyBlYXNlYDtcbiAgICAgIGVsQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzaW5nJyk7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKCdhY2NvcmRpb25fX2l0ZW1fc2xpZGVkb3duJyk7XG4gICAgICBlbEJvZHkub2Zmc2V0SGVpZ2h0O1xuICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9IGAke2hlaWdodH1weGA7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGVsQm9keS5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGlvbl9faXRlbV9zbGlkZWRvd24nKTtcbiAgICAgICAgZWxCb2R5LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNlJyk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlvbl9faXRlbV9zaG93Jyk7XG4gICAgICAgIGVsQm9keS5zdHlsZVsnZGlzcGxheSddID0gJyc7XG4gICAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAnJztcbiAgICAgICAgZWxCb2R5LnN0eWxlWyd0cmFuc2l0aW9uJ10gPSAnJztcbiAgICAgICAgZWxCb2R5LnN0eWxlWydvdmVyZmxvdyddID0gJyc7XG4gICAgICB9LCB0aGlzLl9jb25maWcuZHVyYXRpb24pO1xuICAgIH1cbiAgICBoaWRlKGVsKSB7XG4gICAgICBjb25zdCBlbEJvZHkgPSBlbC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uX19ib2R5Jyk7XG4gICAgICBpZiAoZWxCb2R5LmNsYXNzTGlzdC5jb250YWlucygnY29sbGFwc2luZycpIHx8ICFlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlvbl9faXRlbV9zaG93JykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9IGAke2VsQm9keS5vZmZzZXRIZWlnaHR9cHhgO1xuICAgICAgZWxCb2R5Lm9mZnNldEhlaWdodDtcbiAgICAgIGVsQm9keS5zdHlsZVsnZGlzcGxheSddID0gJ2Jsb2NrJztcbiAgICAgIGVsQm9keS5zdHlsZVsnaGVpZ2h0J10gPSAwO1xuICAgICAgZWxCb2R5LnN0eWxlWydvdmVyZmxvdyddID0gJ2hpZGRlbic7XG4gICAgICBlbEJvZHkuc3R5bGVbJ3RyYW5zaXRpb24nXSA9IGBoZWlnaHQgJHt0aGlzLl9jb25maWcuZHVyYXRpb259bXMgZWFzZWA7XG4gICAgICBlbEJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2UnKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGlvbl9faXRlbV9zaG93Jyk7XG4gICAgICBlbEJvZHkuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2luZycpO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnY29sbGFwc2luZycpO1xuICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICAgICAgZWxCb2R5LnN0eWxlWydkaXNwbGF5J10gPSAnJztcbiAgICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9ICcnO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ3RyYW5zaXRpb24nXSA9ICcnO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ292ZXJmbG93J10gPSAnJztcbiAgICAgIH0sIHRoaXMuX2NvbmZpZy5kdXJhdGlvbik7XG4gICAgfVxuICAgIHRvZ2dsZShlbCkge1xuICAgICAgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpID8gdGhpcy5oaWRlKGVsKSA6IHRoaXMuc2hvdyhlbCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhY2NvcmRpb24nKSkge1xuICAgIG5ldyBJdGNBY2NvcmRpb24oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbicpLCB7XG4gICAgICBhbHdheXNPcGVuOiB0cnVlXG4gICAgfSk7XG4gIH1cblxuICAvL2NvbnRlbnQgc2xpZGVyXG4gIGNvbnN0IHN3aXBlckNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItY29udGFpbmVyJyk7IC8vc3dpcGVyLXNsaWRlLWFjdGl2ZVxuICBpZiAoc3dpcGVyQ29udGFpbmVyKSB7XG4gICAgY29uc3Qgc2xpZGVyU2xpZGUgPSBzd2lwZXJDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnN3aXBlci1zbGlkZScpO1xuICAgIGNvbnN0IGltYWdlRGVzYyA9IHN3aXBlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucCcpO1xuICAgIGltYWdlRGVzYy5pbm5lckhUTUwgPSBzbGlkZXJTbGlkZVswXS5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xuXG4gICAgdmFyIGNvbnRlbnRTd2lwZXIgPSBuZXcgU3dpcGVyKFwiLmNvbnRlbnRTbGlkZXJcIiwge1xuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcbiAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiBcIi5zd2lwZXItYnV0dG9uLW5leHRcIixcbiAgICAgICAgcHJldkVsOiBcIi5zd2lwZXItYnV0dG9uLXByZXZcIixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb250ZW50U3dpcGVyLm9uKCdzbGlkZUNoYW5nZScsICgpID0+IHtcbiAgICAgIGltYWdlRGVzYy5pbm5lckhUTUwgPSBzbGlkZXJTbGlkZVtjb250ZW50U3dpcGVyLmFjdGl2ZUluZGV4XS5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc2xpZGVyUHJldiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJQcmV2Jyk7XG4gICAgY29uc3Qgc2xpZGVyTmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJOZXh0Jyk7XG4gICAgc2xpZGVyUHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnRlbnRTd2lwZXIuc2xpZGVQcmV2KCk7XG4gICAgfSk7XG4gICAgc2xpZGVyTmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnRlbnRTd2lwZXIuc2xpZGVOZXh0KCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gbnVtYmVycyBjb3VudGVyICsrXG4gIGxldCBudW1iZXJzVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubnVtYmVyc19fdGl0bGUnKTtcblxuICBjb25zdCBvYnNlcnZlck9wdGlvbnMgPSB7XG4gICAgcm9vdE1hcmdpbjogJzBweCAwcHggLTEwJSAwcHgnLFxuICAgIHRocmVzaG9sZDogMCxcbiAgfVxuXG4gIGlmIChudW1iZXJzVGl0bGUubGVuZ3RoICE9IDApIHtcbiAgICBudW1iZXJzVGl0bGUuZm9yRWFjaCgodGl0bGUpID0+IHtcbiAgICAgIHRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1lbmQtY291bnRlcicsIHRpdGxlLmlubmVySFRNTCk7XG4gICAgICB0aXRsZS5pbm5lckhUTUwgPSAwO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbnVtYmVyc0NvdW50ZXJDYWxsYmFjayA9IChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcbiAgICAgICAgICBudW1iZXJzVGl0bGUuZm9yRWFjaCgodGl0bGUpID0+IHtcbiAgICAgICAgICAgIG51bWJlckNvdW50ZXIodGl0bGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBudW1iZXJPYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihudW1iZXJzQ291bnRlckNhbGxiYWNrLCBvYnNlcnZlck9wdGlvbnMpO1xuXG4gICAgbnVtYmVyT2JzZXJ2ZXIub2JzZXJ2ZShudW1iZXJzVGl0bGVbMF0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbnVtYmVyQ291bnRlcih0aXRsZSkge1xuICAgIGxldCBudW1iZXIgPSB0aXRsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZW5kLWNvdW50ZXInKS5yZXBsYWNlKC9bXjAtOV0vZywgXCJcIik7XG4gICAgbGV0IHN5bWJvbCA9IHRpdGxlLmdldEF0dHJpYnV0ZSgnZGF0YS1lbmQtY291bnRlcicpLnJlcGxhY2UoL1swLTldL2csIFwiXCIpO1xuXG4gICAgbGV0IG4gPSAwO1xuICAgIGxldCBzdGVwID0gbnVtYmVyIDwgMTAwID8gMSA6IDEwO1xuXG4gICAgbGV0IHQgPSBzdGVwID09PSAxID8gNTAgOiAxMDtcblxuICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIG4gKz0gc3RlcDtcbiAgICAgIHRpdGxlLmlubmVySFRNTCA9IG4gKyBzeW1ib2w7XG4gICAgICBpZiAobiA9PSBudW1iZXIpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfSwgdClcblxuICAgIHRpdGxlLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1lbmQtY291bnRlcicpO1xuICB9XG5cbiAgLy9wYXJ0bmVyc1xuICBjb25zdCBwYXJ0bmVyc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFydG5lcnNfX2xpc3QnKTtcblxuICBpZiAocGFydG5lcnNMaXN0KSB7XG4gICAgY29uc3QgcGFydG5lcnNMaXN0Q2FsbGJhY2sgPSAoZW50cmllcywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnkpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKGVudHJ5LnRhcmdldCk7XG4gICAgICAgICAgbG9hZFBhcnRuZXJzKHBhcnRuZXJzTGlzdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcnRuZXJzTGlzdE9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHBhcnRuZXJzTGlzdENhbGxiYWNrLCBvYnNlcnZlck9wdGlvbnMpO1xuXG4gICAgcGFydG5lcnNMaXN0T2JzZXJ2ZXIub2JzZXJ2ZShwYXJ0bmVyc0xpc3QpO1xuXG4gICAgZnVuY3Rpb24gbG9hZFBhcnRuZXJzKHBhcnRuZXJzTGlzdCkge1xuICAgICAgY29uc3QgYWxsUGFydG5lcnMgPSBwYXJ0bmVyc0xpc3QucXVlcnlTZWxlY3RvckFsbCgnLnBhcnRuZXJzX19saXN0LWVsZW1lbnQnKTtcbiAgICAgIGFsbFBhcnRuZXJzLmZvckVhY2goKGVsLCBpZHgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7ZWwuY2xhc3NMaXN0LmFkZCgnbG9hZCcpO30sIGlkeCAqIChhbGxQYXJ0bmVycy5sZW5ndGggKyA4MCkgKyAyNTApXG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wVXAtbW9kYWwnKTtcbiAgY29uc3QgcG9wVXBCYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcFVwLWJhY2tncm91bmQnKTtcbiAgY29uc3Qgb3Blbk1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1aWNrLWNvbnN1bHQnKTtcbiAgY29uc3QgY2xvc2VNb2RhbEJ0biA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1tb2RhbCcpO1xuXG4gIG9wZW5Nb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tc2hvdycpO1xuICAgIHBvcFVwQmFjay5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tY2xvc2UnKTtcbiAgICBwb3BVcEJhY2suY2xhc3NMaXN0LmFkZCgnbW9kYWwtLW9wZW4nKTtcbiAgICBcbiAgICBwb3BVcEJhY2suYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC0tc2hvdycpO1xuICAgICAgcG9wVXBCYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1vcGVuJyk7XG4gICAgICBwb3BVcEJhY2suY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWNsb3NlJyk7XG4gICAgfSk7XG4gIH0pO1xuICBjbG9zZU1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1zaG93Jyk7XG4gICAgcG9wVXBCYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1vcGVuJyk7XG4gICAgcG9wVXBCYWNrLmNsYXNzTGlzdC5hZGQoJ21vZGFsLS1jbG9zZScpO1xuICB9KTtcblxuICBjb25zdCByZXZpZXdzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXZpZXdfX2luZm8nKTtcblxuICBpZiAocmV2aWV3c0xpc3QubGVuZ3RoID4gMCl7XG4gICAgcmV2aWV3c0xpc3QuZm9yRWFjaCgocmV2aWV3KSA9PiB7XG4gICAgICBjb25zdCBidG4gPSByZXZpZXcucXVlcnlTZWxlY3RvcignLnJldmlld19fdmlldy1mdWxsLWJ0bicpO1xuICAgICAgbGV0IHJldmlld0hlaWdodCA9IHJldmlldy5xdWVyeVNlbGVjdG9yKCcucmV2aWV3X190ZXh0Jykuc2Nyb2xsSGVpZ2h0O1xuICAgICAgbGV0IHJldmlld1RleHQgPSByZXZpZXcucXVlcnlTZWxlY3RvcignLnJldmlld19fdGV4dCcpO1xuICAgICAgaWYgKHJldmlld0hlaWdodCA8PSAxNDApe1xuICAgICAgICBidG4uc3R5bGUub3BhY2l0eSA9IDA7XG4gICAgICB9XG5cbiAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGxldCByZXZpZXdIZWlnaHQgPSByZXZpZXcucXVlcnlTZWxlY3RvcignLnJldmlld19fdGV4dCcpLnNjcm9sbEhlaWdodDtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZihyZXZpZXdUZXh0LmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKXtcbiAgICAgICAgICByZXZpZXdUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICAgICByZXZpZXdUZXh0LnN0eWxlLmhlaWdodCA9IDE0MCArICdweCc7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldmlld1RleHQuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICAgIHJldmlld1RleHQuc3R5bGUuaGVpZ2h0ID0gYCR7cmV2aWV3SGVpZ2h0fXB4YDtcbiAgICAgICAgfVxuXG4gICAgICB9KVxuICAgIH0pO1xuICB9XG59KTtcblxuIl19
