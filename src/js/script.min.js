"use strict";

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }
function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }
function _toPropertyKey(arg) { var key = _toPrimitive(arg, "string"); return _typeof(key) === "symbol" ? key : String(key); }
function _toPrimitive(input, hint) { if (_typeof(input) !== "object" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || "default"); if (_typeof(res) !== "object") return res; throw new TypeError("@@toPrimitive must return a primitive value."); } return (hint === "string" ? String : Number)(input); }
document.addEventListener('DOMContentLoaded', function () {
  var setLangBtn = document.querySelector('.switch-language__btn');
  var setLangDropdown = document.querySelector('.switch-language__dropdown');
  var setLangDropdownEls = document.querySelectorAll('.switch-language__dropdown-element');
  var menuBackdrop = document.querySelector('.backdrop');
  var menuDropdownLink = document.querySelector('.menu-item__dropdown');
  var header = document.querySelector('.header');
  setLangBtn.addEventListener('click', function (e) {
    e.preventDefault();
    setLangDropdown.classList.toggle('switch-language__dropdown--active');
    if (!header.classList.contains('header__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
    });
  });
  setLangDropdownEls.forEach(function (el) {
    el.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      setLangDropdown.classList.remove('switch-language__dropdown--active');
      var currentLang = setLangBtn.querySelector('p').innerHTML;
      setLangBtn.querySelector('p').innerHTML = el.innerHTML;
      el.innerHTML = currentLang;
    });
  });
  menuDropdownLink.addEventListener('click', function (e) {
    e.preventDefault();
    if (!setLangDropdown.classList.contains('switch-language__dropdown--active')) {
      menuBackdrop.classList.toggle('backdrop--active');
    }
    header.classList.toggle('header__dropdown--active');
    menuBackdrop.addEventListener('click', function () {
      menuBackdrop.classList.remove('backdrop--active');
      header.classList.remove('header__dropdown--active');
    });
  });

  //mobile menu
  var burgerBtn = header.querySelector('.burger-btn');
  burgerBtn.addEventListener('click', function () {
    header.classList.toggle('mobile-menu--active');
    if (header.classList.contains('mobile-menu--active')) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'visible';
    }
  });
  var mobileDropdownBtns = header.querySelectorAll('.mobile-menu__dropdown-btn');
  mobileDropdownBtns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      btn.classList.toggle('mobile-dropdown--active');
    });
  });
  var formTopicInput = document.querySelector('.form__topic');
  var formTopicDropdown = document.querySelector('.topic__dropdown');
  if (formTopicInput) {
    formTopicInput.addEventListener('click', function (e) {
      if (e.target.classList.contains('topic__dropdown-item')) {
        formTopicInput.querySelector('.input-placeholder').innerHTML = e.target.innerHTML;
        formTopicInput.querySelector('#form-topic').setAttribute('value', e.target.innerHTML);
      }
      console.log(e.target);
      formTopicInput.classList.toggle('topic__dropdown--active');
    });
  }

  // templates accordion
  // const accordionHeaders = document.querySelectorAll('.templates__list-element-header');
  // if (accordionHeaders){
  //     accordionHeaders.forEach((header) => {
  //         header.addEventListener('click', () => {
  //             header.classList.toggle('templates__list-element--active');
  //         });
  //     });
  // }
  var ItcAccordion = /*#__PURE__*/function () {
    function ItcAccordion(target, config) {
      _classCallCheck(this, ItcAccordion);
      this._el = typeof target === 'string' ? document.querySelector(target) : target;
      var defaultConfig = {
        alwaysOpen: true,
        duration: 350
      };
      this._config = Object.assign(defaultConfig, config);
      this.addEventListener();
    }
    _createClass(ItcAccordion, [{
      key: "addEventListener",
      value: function addEventListener() {
        var _this = this;
        this._el.addEventListener('click', function (e) {
          var elHeader = e.target.closest('.accordion__header');
          if (!elHeader) {
            return;
          }
          if (!_this._config.alwaysOpen) {
            var elOpenItem = _this._el.querySelector('.accordion__item_show');
            if (elOpenItem) {
              elOpenItem !== elHeader.parentElement ? _this.toggle(elOpenItem) : null;
            }
          }
          _this.toggle(elHeader.parentElement);
        });
      }
    }, {
      key: "show",
      value: function show(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['display'] = 'block';
        var height = elBody.offsetHeight;
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.add('collapsing');
        el.classList.add('accordion__item_slidedown');
        elBody.offsetHeight;
        elBody.style['height'] = "".concat(height, "px");
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          el.classList.remove('accordion__item_slidedown');
          elBody.classList.add('collapse');
          el.classList.add('accordion__item_show');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "hide",
      value: function hide(el) {
        var elBody = el.querySelector('.accordion__body');
        if (elBody.classList.contains('collapsing') || !el.classList.contains('accordion__item_show')) {
          return;
        }
        elBody.style['height'] = "".concat(elBody.offsetHeight, "px");
        elBody.offsetHeight;
        elBody.style['display'] = 'block';
        elBody.style['height'] = 0;
        elBody.style['overflow'] = 'hidden';
        elBody.style['transition'] = "height ".concat(this._config.duration, "ms ease");
        elBody.classList.remove('collapse');
        el.classList.remove('accordion__item_show');
        elBody.classList.add('collapsing');
        window.setTimeout(function () {
          elBody.classList.remove('collapsing');
          elBody.classList.add('collapse');
          elBody.style['display'] = '';
          elBody.style['height'] = '';
          elBody.style['transition'] = '';
          elBody.style['overflow'] = '';
        }, this._config.duration);
      }
    }, {
      key: "toggle",
      value: function toggle(el) {
        el.classList.contains('accordion__item_show') ? this.hide(el) : this.show(el);
      }
    }]);
    return ItcAccordion;
  }();
  if (document.querySelector('#accordion')) {
    new ItcAccordion(document.querySelector('.accordion'), {
      alwaysOpen: true
    });
  }

  //content slider
  var swiperContainer = document.querySelector('.slider-container'); //swiper-slide-active
  if (swiperContainer) {
    var sliderSlide = swiperContainer.querySelectorAll('.swiper-slide');
    var imageDesc = swiperContainer.querySelector('.p');
    imageDesc.innerHTML = sliderSlide[0].getAttribute('alt');
    var contentSwiper = new Swiper(".contentSlider", {
      pagination: {
        el: ".swiper-pagination",
        clickable: true
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev"
      }
    });
    contentSwiper.on('slideChange', function () {
      imageDesc.innerHTML = sliderSlide[contentSwiper.activeIndex].getAttribute('alt');
    });
    var sliderPrev = document.querySelector('.sliderPrev');
    var sliderNext = document.querySelector('.sliderNext');
    sliderPrev.addEventListener('click', function () {
      contentSwiper.slidePrev();
    });
    sliderNext.addEventListener('click', function () {
      contentSwiper.slideNext();
    });
  }
  ;

  // numbers counter ++
  var numbersTitle = document.querySelectorAll('.numbers__title');
  var observerOptions = {
    rootMargin: '0px 0px -10% 0px',
    threshold: 0
  };
  if (numbersTitle.length != 0) {
    numbersTitle.forEach(function (title) {
      title.setAttribute('data-end-counter', title.innerHTML);
      title.innerHTML = 0;
    });
    var numbersCounterCallback = function numbersCounterCallback(entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          numbersTitle.forEach(function (title) {
            numberCounter(title);
          });
        }
      });
    };
    var numberObserver = new IntersectionObserver(numbersCounterCallback, observerOptions);
    numberObserver.observe(numbersTitle[0]);
  }
  function numberCounter(title) {
    var number = title.getAttribute('data-end-counter').replace(/[^0-9]/g, "");
    var symbol = title.getAttribute('data-end-counter').replace(/[0-9]/g, "");
    var n = 0;
    var step = number < 100 ? 1 : 10;
    var t = step === 1 ? 50 : 10;
    var interval = setInterval(function () {
      n += step;
      title.innerHTML = n + symbol;
      if (n == number) {
        clearInterval(interval);
      }
    }, t);
    title.removeAttribute('data-end-counter');
  }

  //partners
  var partnersList = document.querySelector('.partners__list');
  if (partnersList) {
    var loadPartners = function loadPartners(partnersList) {
      var allPartners = partnersList.querySelectorAll('.partners__list-element');
      allPartners.forEach(function (el, idx) {
        setTimeout(function () {
          el.classList.add('load');
        }, idx * (allPartners.length + 80) + 250);
      });
    };
    var partnersListCallback = function partnersListCallback(entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
          loadPartners(partnersList);
        }
      });
    };
    var partnersListObserver = new IntersectionObserver(partnersListCallback, observerOptions);
    partnersListObserver.observe(partnersList);
    ;
  }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRMYW5nQnRuIiwicXVlcnlTZWxlY3RvciIsInNldExhbmdEcm9wZG93biIsInNldExhbmdEcm9wZG93bkVscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtZW51QmFja2Ryb3AiLCJtZW51RHJvcGRvd25MaW5rIiwiaGVhZGVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJmb3JFYWNoIiwiZWwiLCJjdXJyZW50TGFuZyIsImlubmVySFRNTCIsImJ1cmdlckJ0biIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwibW9iaWxlRHJvcGRvd25CdG5zIiwiYnRuIiwiZm9ybVRvcGljSW5wdXQiLCJmb3JtVG9waWNEcm9wZG93biIsInRhcmdldCIsInNldEF0dHJpYnV0ZSIsImNvbnNvbGUiLCJsb2ciLCJJdGNBY2NvcmRpb24iLCJjb25maWciLCJfY2xhc3NDYWxsQ2hlY2siLCJfZWwiLCJkZWZhdWx0Q29uZmlnIiwiYWx3YXlzT3BlbiIsImR1cmF0aW9uIiwiX2NvbmZpZyIsIk9iamVjdCIsImFzc2lnbiIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwiX3RoaXMiLCJlbEhlYWRlciIsImNsb3Nlc3QiLCJlbE9wZW5JdGVtIiwicGFyZW50RWxlbWVudCIsInNob3ciLCJlbEJvZHkiLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJjb25jYXQiLCJhZGQiLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiaGlkZSIsInN3aXBlckNvbnRhaW5lciIsInNsaWRlclNsaWRlIiwiaW1hZ2VEZXNjIiwiZ2V0QXR0cmlidXRlIiwiY29udGVudFN3aXBlciIsIlN3aXBlciIsInBhZ2luYXRpb24iLCJjbGlja2FibGUiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwib24iLCJhY3RpdmVJbmRleCIsInNsaWRlclByZXYiLCJzbGlkZXJOZXh0Iiwic2xpZGVQcmV2Iiwic2xpZGVOZXh0IiwibnVtYmVyc1RpdGxlIiwib2JzZXJ2ZXJPcHRpb25zIiwicm9vdE1hcmdpbiIsInRocmVzaG9sZCIsImxlbmd0aCIsInRpdGxlIiwibnVtYmVyc0NvdW50ZXJDYWxsYmFjayIsImVudHJpZXMiLCJvYnNlcnZlciIsImVudHJ5IiwiaXNJbnRlcnNlY3RpbmciLCJ1bm9ic2VydmUiLCJudW1iZXJDb3VudGVyIiwibnVtYmVyT2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsIm9ic2VydmUiLCJudW1iZXIiLCJyZXBsYWNlIiwic3ltYm9sIiwibiIsInN0ZXAiLCJ0IiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXJ0bmVyc0xpc3QiLCJsb2FkUGFydG5lcnMiLCJhbGxQYXJ0bmVycyIsImlkeCIsInBhcnRuZXJzTGlzdENhbGxiYWNrIiwicGFydG5lcnNMaXN0T2JzZXJ2ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUFBLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsWUFBTTtFQUNsRCxJQUFNQyxVQUFVLEdBQUdGLFFBQVEsQ0FBQ0csYUFBYSxDQUFDLHVCQUF1QixDQUFDO0VBQ2xFLElBQU1DLGVBQWUsR0FBR0osUUFBUSxDQUFDRyxhQUFhLENBQUMsNEJBQTRCLENBQUM7RUFDNUUsSUFBTUUsa0JBQWtCLEdBQUdMLFFBQVEsQ0FBQ00sZ0JBQWdCLENBQUMsb0NBQW9DLENBQUM7RUFFMUYsSUFBTUMsWUFBWSxHQUFHUCxRQUFRLENBQUNHLGFBQWEsQ0FBQyxXQUFXLENBQUM7RUFFeEQsSUFBTUssZ0JBQWdCLEdBQUdSLFFBQVEsQ0FBQ0csYUFBYSxDQUFDLHNCQUFzQixDQUFDO0VBQ3ZFLElBQU1NLE1BQU0sR0FBR1QsUUFBUSxDQUFDRyxhQUFhLENBQUMsU0FBUyxDQUFDO0VBRWhERCxVQUFVLENBQUNELGdCQUFnQixD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QkYsUUFBUSxDQUFDRyxTQUFTLENBQUNGLEtBQUssQ0FBQ3pELE1BQU0sQ0FBQztVQUNoQzJFLFlBQVksQ0FBQ0QsWUFBWSxDQUFDO1FBQzVCO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVELElBQU1LLG9CQUFvQixHQUFHLElBQUlqQixvQkFBb0IsQ0FBQ2dCLG9CQUFvQixFQUFFN0IsZUFBZSxDQUFDO0lBRTVGOEIsb0JBQW9CLENBQUNoQixPQUFPLENBQUNXLFlBQVksQ0FBQztJQU96QztFQUVIO0FBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBzZXRMYW5nQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN3aXRjaC1sYW5ndWFnZV9fYnRuJyk7XG4gIGNvbnN0IHNldExhbmdEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duJyk7XG4gIGNvbnN0IHNldExhbmdEcm9wZG93bkVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duLWVsZW1lbnQnKTtcblxuICBjb25zdCBtZW51QmFja2Ryb3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFja2Ryb3AnKTtcblxuICBjb25zdCBtZW51RHJvcGRvd25MaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbV9fZHJvcGRvd24nKTtcbiAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xuXG4gIHNldExhbmdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRMYW5nRHJvcGRvd24uY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgaWYgKCFoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoZWFkZXJfX2Ryb3Bkb3duLS1hY3RpdmUnKSkge1xuICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC50b2dnbGUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICB9XG4gICAgbWVudUJhY2tkcm9wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICAgIHNldExhbmdEcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2gtbGFuZ3VhZ2VfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICB9KVxuICB9KTtcblxuICBzZXRMYW5nRHJvcGRvd25FbHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG1lbnVCYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKCdiYWNrZHJvcC0tYWN0aXZlJyk7XG4gICAgICBzZXRMYW5nRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoLWxhbmd1YWdlX19kcm9wZG93bi0tYWN0aXZlJyk7XG5cbiAgICAgIGxldCBjdXJyZW50TGFuZyA9IHNldExhbmdCdG4ucXVlcnlTZWxlY3RvcigncCcpLmlubmVySFRNTDtcbiAgICAgIFxuICAgICAgc2V0TGFuZ0J0bi5xdWVyeVNlbGVjdG9yKCdwJykuaW5uZXJIVE1MID0gZWwuaW5uZXJIVE1MO1xuICAgICAgZWwuaW5uZXJIVE1MID0gY3VycmVudExhbmc7XG4gICAgfSk7XG4gIH0pO1xuXG4gIG1lbnVEcm9wZG93bkxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXNldExhbmdEcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXRjaC1sYW5ndWFnZV9fZHJvcGRvd24tLWFjdGl2ZScpKSB7XG4gICAgICBtZW51QmFja2Ryb3AuY2xhc3NMaXN0LnRvZ2dsZSgnYmFja2Ryb3AtLWFjdGl2ZScpO1xuICAgIH1cbiAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGVhZGVyX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgbWVudUJhY2tkcm9wLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbWVudUJhY2tkcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ2JhY2tkcm9wLS1hY3RpdmUnKTtcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2Ryb3Bkb3duLS1hY3RpdmUnKTtcbiAgICB9KVxuICB9KTtcblxuICAvL21vYmlsZSBtZW51XG4gIGNvbnN0IGJ1cmdlckJ0biA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLWJ0bicpO1xuICBidXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoJ21vYmlsZS1tZW51LS1hY3RpdmUnKTtcbiAgICBpZiAoaGVhZGVyLmNsYXNzTGlzdC5jb250YWlucygnbW9iaWxlLW1lbnUtLWFjdGl2ZScpKSB7XG4gICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAndmlzaWJsZSc7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgbW9iaWxlRHJvcGRvd25CdG5zID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2JpbGUtbWVudV9fZHJvcGRvd24tYnRuJyk7XG4gIG1vYmlsZURyb3Bkb3duQnRucy5mb3JFYWNoKChidG4pID0+IHtcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnbW9iaWxlLWRyb3Bkb3duLS1hY3RpdmUnKTtcbiAgICB9KTtcbiAgfSlcblxuICBjb25zdCBmb3JtVG9waWNJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX190b3BpYycpO1xuICBjb25zdCBmb3JtVG9waWNEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BpY19fZHJvcGRvd24nKTtcbiAgaWYgKGZvcm1Ub3BpY0lucHV0KSB7XG4gICAgZm9ybVRvcGljSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndG9waWNfX2Ryb3Bkb3duLWl0ZW0nKSkge1xuICAgICAgICBmb3JtVG9waWNJbnB1dC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtcGxhY2Vob2xkZXInKS5pbm5lckhUTUwgPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICAgIGZvcm1Ub3BpY0lucHV0LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLXRvcGljJykuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGUudGFyZ2V0LmlubmVySFRNTCk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhlLnRhcmdldClcbiAgICAgIGZvcm1Ub3BpY0lucHV0LmNsYXNzTGlzdC50b2dnbGUoJ3RvcGljX19kcm9wZG93bi0tYWN0aXZlJyk7XG4gICAgfSk7XG4gIH1cblxuICAvLyB0ZW1wbGF0ZXMgYWNjb3JkaW9uXG4gIC8vIGNvbnN0IGFjY29yZGlvbkhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVtcGxhdGVzX19saXN0LWVsZW1lbnQtaGVhZGVyJyk7XG4gIC8vIGlmIChhY2NvcmRpb25IZWFkZXJzKXtcbiAgLy8gICAgIGFjY29yZGlvbkhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyKSA9PiB7XG4gIC8vICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAvLyAgICAgICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgndGVtcGxhdGVzX19saXN0LWVsZW1lbnQtLWFjdGl2ZScpO1xuICAvLyAgICAgICAgIH0pO1xuICAvLyAgICAgfSk7XG4gIC8vIH1cblxuICBjbGFzcyBJdGNBY2NvcmRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCwgY29uZmlnKSB7XG4gICAgICB0aGlzLl9lbCA9IHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpIDogdGFyZ2V0O1xuICAgICAgY29uc3QgZGVmYXVsdENvbmZpZyA9IHtcbiAgICAgICAgYWx3YXlzT3BlbjogdHJ1ZSxcbiAgICAgICAgZHVyYXRpb246IDM1MFxuICAgICAgfTtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdENvbmZpZywgY29uZmlnKTtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKCkge1xuICAgICAgdGhpcy5fZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCBlbEhlYWRlciA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5hY2NvcmRpb25fX2hlYWRlcicpO1xuICAgICAgICBpZiAoIWVsSGVhZGVyKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY29uZmlnLmFsd2F5c09wZW4pIHtcbiAgICAgICAgICBjb25zdCBlbE9wZW5JdGVtID0gdGhpcy5fZWwucXVlcnlTZWxlY3RvcignLmFjY29yZGlvbl9faXRlbV9zaG93Jyk7XG4gICAgICAgICAgaWYgKGVsT3Blbkl0ZW0pIHtcbiAgICAgICAgICAgIGVsT3Blbkl0ZW0gIT09IGVsSGVhZGVyLnBhcmVudEVsZW1lbnQgPyB0aGlzLnRvZ2dsZShlbE9wZW5JdGVtKSA6IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9nZ2xlKGVsSGVhZGVyLnBhcmVudEVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHNob3coZWwpIHtcbiAgICAgIGNvbnN0IGVsQm9keSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb25fX2JvZHknKTtcbiAgICAgIGlmIChlbEJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzaW5nJykgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY2NvcmRpb25fX2l0ZW1fc2hvdycpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGVsQm9keS5zdHlsZVsnZGlzcGxheSddID0gJ2Jsb2NrJztcbiAgICAgIGNvbnN0IGhlaWdodCA9IGVsQm9keS5vZmZzZXRIZWlnaHQ7XG4gICAgICBlbEJvZHkuc3R5bGVbJ2hlaWdodCddID0gMDtcbiAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICdoaWRkZW4nO1xuICAgICAgZWxCb2R5LnN0eWxlWyd0cmFuc2l0aW9uJ10gPSBgaGVpZ2h0ICR7dGhpcy5fY29uZmlnLmR1cmF0aW9ufW1zIGVhc2VgO1xuICAgICAgZWxCb2R5LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNpbmcnKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjY29yZGlvbl9faXRlbV9zbGlkZWRvd24nKTtcbiAgICAgIGVsQm9keS5vZmZzZXRIZWlnaHQ7XG4gICAgICBlbEJvZHkuc3R5bGVbJ2hlaWdodCddID0gYCR7aGVpZ2h0fXB4YDtcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZWxCb2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2NvbGxhcHNpbmcnKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkaW9uX19pdGVtX3NsaWRlZG93bicpO1xuICAgICAgICBlbEJvZHkuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2UnKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYWNjb3JkaW9uX19pdGVtX3Nob3cnKTtcbiAgICAgICAgZWxCb2R5LnN0eWxlWydkaXNwbGF5J10gPSAnJztcbiAgICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9ICcnO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ3RyYW5zaXRpb24nXSA9ICcnO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ292ZXJmbG93J10gPSAnJztcbiAgICAgIH0sIHRoaXMuX2NvbmZpZy5kdXJhdGlvbik7XG4gICAgfVxuICAgIGhpZGUoZWwpIHtcbiAgICAgIGNvbnN0IGVsQm9keSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb25fX2JvZHknKTtcbiAgICAgIGlmIChlbEJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzaW5nJykgfHwgIWVsLmNsYXNzTGlzdC5jb250YWlucygnYWNjb3JkaW9uX19pdGVtX3Nob3cnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbEJvZHkuc3R5bGVbJ2hlaWdodCddID0gYCR7ZWxCb2R5Lm9mZnNldEhlaWdodH1weGA7XG4gICAgICBlbEJvZHkub2Zmc2V0SGVpZ2h0O1xuICAgICAgZWxCb2R5LnN0eWxlWydkaXNwbGF5J10gPSAnYmxvY2snO1xuICAgICAgZWxCb2R5LnN0eWxlWydoZWlnaHQnXSA9IDA7XG4gICAgICBlbEJvZHkuc3R5bGVbJ292ZXJmbG93J10gPSAnaGlkZGVuJztcbiAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gYGhlaWdodCAke3RoaXMuX2NvbmZpZy5kdXJhdGlvbn1tcyBlYXNlYDtcbiAgICAgIGVsQm9keS5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZScpO1xuICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkaW9uX19pdGVtX3Nob3cnKTtcbiAgICAgIGVsQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzaW5nJyk7XG4gICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGVsQm9keS5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzaW5nJyk7XG4gICAgICAgIGVsQm9keS5jbGFzc0xpc3QuYWRkKCdjb2xsYXBzZScpO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ2Rpc3BsYXknXSA9ICcnO1xuICAgICAgICBlbEJvZHkuc3R5bGVbJ2hlaWdodCddID0gJyc7XG4gICAgICAgIGVsQm9keS5zdHlsZVsndHJhbnNpdGlvbiddID0gJyc7XG4gICAgICAgIGVsQm9keS5zdHlsZVsnb3ZlcmZsb3cnXSA9ICcnO1xuICAgICAgfSwgdGhpcy5fY29uZmlnLmR1cmF0aW9uKTtcbiAgICB9XG4gICAgdG9nZ2xlKGVsKSB7XG4gICAgICBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGlvbl9faXRlbV9zaG93JykgPyB0aGlzLmhpZGUoZWwpIDogdGhpcy5zaG93KGVsKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FjY29yZGlvbicpKSB7XG4gICAgbmV3IEl0Y0FjY29yZGlvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uJyksIHtcbiAgICAgIGFsd2F5c09wZW46IHRydWVcbiAgICB9KTtcbiAgfVxuXG4gIC8vY29udGVudCBzbGlkZXJcbiAgY29uc3Qgc3dpcGVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlci1jb250YWluZXInKTsgLy9zd2lwZXItc2xpZGUtYWN0aXZlXG4gIGlmIChzd2lwZXJDb250YWluZXIpIHtcbiAgICBjb25zdCBzbGlkZXJTbGlkZSA9IHN3aXBlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc3dpcGVyLXNsaWRlJyk7XG4gICAgY29uc3QgaW1hZ2VEZXNjID0gc3dpcGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wJyk7XG4gICAgaW1hZ2VEZXNjLmlubmVySFRNTCA9IHNsaWRlclNsaWRlWzBdLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XG5cbiAgICB2YXIgY29udGVudFN3aXBlciA9IG5ldyBTd2lwZXIoXCIuY29udGVudFNsaWRlclwiLCB7XG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxuICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICBuZXh0RWw6IFwiLnN3aXBlci1idXR0b24tbmV4dFwiLFxuICAgICAgICBwcmV2RWw6IFwiLnN3aXBlci1idXR0b24tcHJldlwiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnRlbnRTd2lwZXIub24oJ3NsaWRlQ2hhbmdlJywgKCkgPT4ge1xuICAgICAgaW1hZ2VEZXNjLmlubmVySFRNTCA9IHNsaWRlclNsaWRlW2NvbnRlbnRTd2lwZXIuYWN0aXZlSW5kZXhdLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBzbGlkZXJQcmV2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlclByZXYnKTtcbiAgICBjb25zdCBzbGlkZXJOZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlck5leHQnKTtcbiAgICBzbGlkZXJQcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29udGVudFN3aXBlci5zbGlkZVByZXYoKTtcbiAgICB9KTtcbiAgICBzbGlkZXJOZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29udGVudFN3aXBlci5zbGlkZU5leHQoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBudW1iZXJzIGNvdW50ZXIgKytcbiAgbGV0IG51bWJlcnNUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5udW1iZXJzX190aXRsZScpO1xuXG4gIGNvbnN0IG9ic2VydmVyT3B0aW9ucyA9IHtcbiAgICByb290TWFyZ2luOiAnMHB4IDBweCAtMTAlIDBweCcsXG4gICAgdGhyZXNob2xkOiAwLFxuICB9XG5cbiAgaWYgKG51bWJlcnNUaXRsZS5sZW5ndGggIT0gMCkge1xuICAgIG51bWJlcnNUaXRsZS5mb3JFYWNoKCh0aXRsZSkgPT4ge1xuICAgICAgdGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLWVuZC1jb3VudGVyJywgdGl0bGUuaW5uZXJIVE1MKTtcbiAgICAgIHRpdGxlLmlubmVySFRNTCA9IDA7XG4gICAgfSk7XG5cbiAgICBjb25zdCBudW1iZXJzQ291bnRlckNhbGxiYWNrID0gKGVudHJpZXMsIG9ic2VydmVyKSA9PiB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xuICAgICAgICAgIG51bWJlcnNUaXRsZS5mb3JFYWNoKCh0aXRsZSkgPT4ge1xuICAgICAgICAgICAgbnVtYmVyQ291bnRlcih0aXRsZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IG51bWJlck9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKG51bWJlcnNDb3VudGVyQ2FsbGJhY2ssIG9ic2VydmVyT3B0aW9ucyk7XG5cbiAgICBudW1iZXJPYnNlcnZlci5vYnNlcnZlKG51bWJlcnNUaXRsZVswXSk7XG4gIH1cblxuICBmdW5jdGlvbiBudW1iZXJDb3VudGVyKHRpdGxlKSB7XG4gICAgbGV0IG51bWJlciA9IHRpdGxlLmdldEF0dHJpYnV0ZSgnZGF0YS1lbmQtY291bnRlcicpLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKTtcbiAgICBsZXQgc3ltYm9sID0gdGl0bGUuZ2V0QXR0cmlidXRlKCdkYXRhLWVuZC1jb3VudGVyJykucmVwbGFjZSgvWzAtOV0vZywgXCJcIik7XG5cbiAgICBsZXQgbiA9IDA7XG4gICAgbGV0IHN0ZXAgPSBudW1iZXIgPCAxMDAgPyAxIDogMTA7XG5cbiAgICBsZXQgdCA9IHN0ZXAgPT09IDEgPyA1MCA6IDEwO1xuXG4gICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgbiArPSBzdGVwO1xuICAgICAgdGl0bGUuaW5uZXJIVE1MID0gbiArIHN5bWJvbDtcbiAgICAgIGlmIChuID09IG51bWJlcikge1xuICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIH1cbiAgICB9LCB0KVxuXG4gICAgdGl0bGUucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWVuZC1jb3VudGVyJyk7XG4gIH1cblxuICAvL3BhcnRuZXJzXG4gIGNvbnN0IHBhcnRuZXJzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJ0bmVyc19fbGlzdCcpO1xuXG4gIGlmIChwYXJ0bmVyc0xpc3QpIHtcbiAgICBjb25zdCBwYXJ0bmVyc0xpc3RDYWxsYmFjayA9IChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xuICAgICAgZW50cmllcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcbiAgICAgICAgICBsb2FkUGFydG5lcnMocGFydG5lcnNMaXN0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFydG5lcnNMaXN0T2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIocGFydG5lcnNMaXN0Q2FsbGJhY2ssIG9ic2VydmVyT3B0aW9ucyk7XG5cbiAgICBwYXJ0bmVyc0xpc3RPYnNlcnZlci5vYnNlcnZlKHBhcnRuZXJzTGlzdCk7XG5cbiAgICBmdW5jdGlvbiBsb2FkUGFydG5lcnMocGFydG5lcnNMaXN0KSB7XG4gICAgICBjb25zdCBhbGxQYXJ0bmVycyA9IHBhcnRuZXJzTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcucGFydG5lcnNfX2xpc3QtZWxlbWVudCcpO1xuICAgICAgYWxsUGFydG5lcnMuZm9yRWFjaCgoZWwsIGlkeCkgPT4ge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtlbC5jbGFzc0xpc3QuYWRkKCdsb2FkJyk7fSwgaWR4ICogKGFsbFBhcnRuZXJzLmxlbmd0aCArIDgwKSArIDI1MClcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgfVxufSk7XG5cbiJdfQ==
